(this["webpackJsonpsailplane-web"]=this["webpackJsonpsailplane-web"]||[]).push([[0],{1015:function(e,t){},1043:function(e,t){},1045:function(e,t){},1072:function(e,t){},11:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r="#2b6284",a="#ecf4f9",c="#9fc7e0",o="#97bace",i="#609bb8",s="hsla(205, 49%, 66%, 1)",l="#67a1cb",u="#3881ad",f="#ef6565",d="#53c171"},1225:function(e,t){},1227:function(e,t){},1232:function(e,t){},1234:function(e,t){},1262:function(e,t){},1299:function(e,t){},1301:function(e,t){},1327:function(e,t){},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n.n(r),c=n(11),o=n(28),i=n(35);function s(){var e=Object(i.d)((function(e){return e.tempData.status})),t=e.message,n=e.isError,r=e.isInfo,s={container:{position:"fixed",bottom:10,backgroundColor:c.e,padding:8,borderRadius:4,fontFamily:"Open Sans",color:n?c.a:"#FFF",fontSize:14,display:"flex",alignItems:"center",height:18,opacity:t?1:0},icon:{marginRight:4}},l=o.i;n&&(l=o.a);var u=l;return a.a.createElement("div",{style:s.container},r?null:a.a.createElement(u,{color:n?c.a:"#FFF",size:16,style:s.icon,className:n?"":"rotating"}),a.a.createElement("span",{style:s.message},t))}},1410:function(e,t,n){},1426:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(98),o=n.n(c),i=(n(580),n(566)),s=n(47),l=n(317),u=n(322);function f(){return a.a.createElement(i.a,null,a.a.createElement(s.a,{exact:!0,path:"/",component:l.a}),a.a.createElement(s.a,{exact:!0,path:"/importInstance/:importInstanceAddress",component:l.a}),a.a.createElement(s.a,{exact:!0,path:"/download/:cid/:path",component:u.a}),a.a.createElement(s.a,{exact:!0,path:"/download/:cid/:path/:displayType",component:u.a}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(35),p=n(567),m=n(50),b=n(325),v=n(568),g=n.n(v),h=n(569),y=n.n(h),j=n(51),O=n(143),E={instances:[],instanceIndex:0,encryptionKey:null};var w=n(33),x={status:{},shareData:{}};var k=Object(m.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.a.ADD_INSTANCE:var n=t.name,r=t.address;return Object(O.a)(e,(function(e){e.instances.push({name:n,address:r})}));case j.a.SET_INSTANCE_INDEX:var a=t.index;return Object(O.a)(e,(function(e){e.instanceIndex=a}));case j.a.SET_ENCRYPTION_KEY:var c=t.key,o=t.keyType;return Object(O.a)(e,(function(e){e.encryptionKey={key:c,type:o}}));case j.a.CLEAR_ENCRYPTION_KEY:t.key,t.keyType;return Object(O.a)(e,(function(e){e.encryptionKey=null}));case j.a.REMOVE_INSTANCE:var i=t.index;return Object(O.a)(e,(function(t){t.instances=e.instances.filter((function(e,t){return i!==t})),t.instances[t.instanceIndex]||(console.log("inner ran"),t.instanceIndex=0)}))}return e},tempData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.b.SET_STATUS:return Object(w.a)(Object(w.a)({},e),{},{status:t.status});case j.b.SET_SHARE_DATA:return Object(w.a)(Object(w.a)({},e),{},{shareData:t.shareData})}return e}}),C=n(570),S={key:"root",storage:g.a,blacklist:["tempData"],stateReconciler:y.a},F=Object(b.a)(S,k),I=[],D=Object(C.createLogger)();I.push(D);var R=function(e){var t=Object(m.d)(m.a.apply(void 0,I))(m.e)(F);return{store:t,persistor:Object(b.b)(t)}}(),T=R.store,A=R.persistor;o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d.a,{store:T},a.a.createElement(p.a,{loading:null,persistor:A},a.a.createElement(f,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n.n(r),c=n(29),o=a.a.memo((function(e){var t=e.blob,n=e.filename,r=e.size;r||(r="small");var o={container:{marginTop:10},image:{width:"small"===r?300:"100%"},audio:{userSelect:"none",outline:0}},i=Object(c.e)(n),s=window.URL.createObjectURL(t);return a.a.createElement("div",{onClick:function(e){return e.stopPropagation()},style:o.container},Object(c.m)(i)?a.a.createElement("div",null,a.a.createElement("img",{src:s,style:o.image})):null,Object(c.l)(i)?a.a.createElement("div",null,a.a.createElement("audio",{controls:!0},a.a.createElement("source",{src:s,style:o.audio}))):null)}))},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),c=n(9),o=n(16),i=n(558),s=n.n(i),l=n(1),u=null;function f(){var e=Object(l.useState)(Boolean(u)),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(l.useState)(null),f=Object(o.a)(i,2),d=f[0],p=f[1];return Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=4;break}console.log("IPFS already started"),e.next=24;break;case 4:if(!window.ipfs||!window.ipfs.enable){e.next=11;break}return console.log("Found window.ipfs"),e.next=8,window.ipfs.enable({commands:["id"]});case 8:u=e.sent,e.next=24;break;case 11:return e.prev=11,console.time("IPFS Started"),e.next=15,s.a.create({EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/","/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/","/dns4/libp2p-rdv.vps.revolunet.com/tcp/443/wss/p2p-webrtc-star/"]}}});case 15:u=e.sent,console.timeEnd("IPFS Started"),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(11),console.error("IPFS init error:",e.t0),u=null,p(e.t0);case 24:window.ipfs=u,r(Boolean(u));case 26:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){u&&u.stop&&(console.log("Stopping IPFS"),u.stop().catch((function(e){return console.error(e)})),u=null,r(!1))}}),[]),{ipfs:u,isIpfsReady:n,ipfsInitError:d}}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n.n(r),c=n(11),o=n(29),i={container:{padding:10,backgroundColor:"#FFF",textAlign:"center",width:"100%",paddingTop:100,fontSize:20,fontFamily:"MuseoModerno",fontWeight:"300",color:c.g}};function s(){return a.a.createElement("div",{style:i.container},o.o?a.a.createElement("div",null,"Loading..."):a.a.createElement("div",null,"This browser does not support WebRTC, please try Safari."))}},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),a=n(1),c=n.n(a),o=n(11),i=n(62),s=n(80);function l(e){var t=e.selected,n=e.onClick,a=e.title,i=e.iconComponent,l=Object(s.a)(),u=Object(r.a)(l,2),f=u[0],d=u[1],p=i,m={container:{backgroundColor:t?"#FFF":d?o.i:null,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",fontSize:16,cursor:"pointer",padding:8,borderRadius:4,marginBottom:8},title:{color:t?o.g:"#FFF",userSelect:"none"},icon:{marginRight:4}};return c.a.createElement("div",{style:m.container,onClick:n,ref:f},i?c.a.createElement(p,{color:t?o.h:"#FFF",size:16,style:m.icon}):null,c.a.createElement("span",{style:m.title},a))}var u=n(81),f={container:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:o.h,color:"#FFF",padding:"20px 10px",minWidth:200,fontFamily:"Open Sans",paddingBottom:0},logo:{display:"inline-block",fontFamily:"MuseoModerno",color:"#FFF",fontSize:24,fontWeight:400,marginBottom:10,textAlign:"center",justifyContent:"center",alignItems:"center",userSelect:"none",cursor:"pointer"},settingsBlock:{bottom:0,width:"100%"},icon:{marginRight:6},mobilePadding:{paddingBottom:6},menuIcon:{position:"absolute",top:25,left:14},logoContainer:{display:"flex",alignItems:"center",justifyContent:"center"}};function d(e){var t=e.setCurrentRightPanel,n=e.currentRightPanel,o=Object(u.a)(),s=Object(a.useState)(!1),d=Object(r.a)(s,2),p=d[0],m=d[1],b=i.a;p&&(b=i.h);var v=b;return c.a.createElement("div",{style:f.container},o?c.a.createElement(v,{color:"#FFF",size:24,style:f.menuIcon,onClick:function(){m(!p)}}):null,c.a.createElement("div",null,c.a.createElement("div",{style:f.logoContainer},c.a.createElement("div",{style:f.logo,onClick:function(){document.location="".concat(window.location.origin+window.location.pathname)}},c.a.createElement(i.g,{color:"#FFF",size:18,style:f.icon}),"Sailplane")),p||!o?c.a.createElement(c.a.Fragment,null,c.a.createElement(l,{title:"Files",iconComponent:i.f,selected:"files"===n,onClick:function(){return t("files")}}),c.a.createElement(l,{title:"Instances",iconComponent:i.d,selected:"instances"===n,onClick:function(){return t("instances")}}),c.a.createElement("div",{style:f.settingsBlock},c.a.createElement(l,{title:"Settings",selected:"settings"===n,onClick:function(){return t("settings")},iconComponent:i.c}))):c.a.createElement("div",{style:f.mobilePadding})))}},226:function(e,t){},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"f",(function(){return E})),n.d(t,"h",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"e",(function(){return F})),n.d(t,"n",(function(){return D})),n.d(t,"p",(function(){return R})),n.d(t,"k",(function(){return A})),n.d(t,"d",(function(){return z})),n.d(t,"i",(function(){return N})),n.d(t,"g",(function(){return B})),n.d(t,"a",(function(){return P})),n.d(t,"l",(function(){return M})),n.d(t,"m",(function(){return _})),n.d(t,"j",(function(){return L})),n.d(t,"o",(function(){return U}));var r=n(2),a=n.n(r),c=n(33),o=n(9),i=n(553),s=n(79),l=n.n(s),u=n(315),f=n.n(u),d=n(554),p=n.n(d),m=n(28),b=n(62),v=n(318),g=n.n(v);function h(e,t){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t,n){var r,c,o,s,l,u,f,d,p,m,b,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.content,c=t.size,o=[],s=0,l=Math.round(c/25e4),u=!0,f=!1,e.prev=6,p=Object(i.a)(r);case 8:return e.next=10,p.next();case 10:return m=e.sent,u=m.done,e.next=14,m.value;case 14:if(b=e.sent,u){e.next=23;break}v=b,n&&n(s,l),o.push(v),s++;case 20:u=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(6),f=!0,d=e.t0;case 29:if(e.prev=29,e.prev=30,u||null==p.return){e.next=34;break}return e.next=34,p.return();case 34:if(e.prev=34,!f){e.next=37;break}throw d;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.abrupt("return",new Blob(o));case 40:case"end":return e.stop()}}),e,null,[[6,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function j(e,t,n){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(a.a.mark((function e(t,n,r){var c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new p.a,i=t.split("/")[t.split("/").length-1],e.next=4,Promise.all(n.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var n,o,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="dir"===t.type,(o=t.path.split("/"))[0]=i,s=o.join("/"),!n){e.next=8;break}e.t0=void 0,e.next=11;break;case 8:return e.next=10,h(t,r);case 10:e.t0=e.sent;case 11:l=e.t0,c.file(s,l,{dir:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.next=6,c.generateAsync({type:"blob"});case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()(n.get(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()(t.get(n));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n,r){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(a.a.mark((function e(t,n,r,c){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()(r.get(t));case 2:return o=e.sent,e.abrupt("return","dir"===o[0].type?j(n,o,c):h(o[0],c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=e.split(".");return t[t.length-1]}var I=["jpg","png","gif","mp3","wav","ogg","flac","jpeg"];function D(e){return I.includes(e.toLowerCase())}function R(e){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.digest("SHA-256",new TextEncoder("utf-8").encode(t));case 2:return n=e.sent,e.abrupt("return",Array.prototype.map.call(new Uint8Array(n),(function(e){return("00"+e.toString(16)).slice(-2)})).join(""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";var a=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1,o=Math.pow(10,n);do{e/=r,++c}while(Math.round(Math.abs(e)*o)/o>=r&&c<a.length-1);return e.toFixed(n)+" "+a[c]}function z(e,t){return t.isDragging?t.isDropAnimating?Object(c.a)(Object(c.a)({},e),{},{transitionDuration:"0.001s"}):e:{}}function N(e,t,n){var r=F(n),a=m.f;return _(r)?a=m.h:M(r)?a=m.k:!function(e){return["mp4","mov","flv","mpg","mpeg","avi"].includes(e.toLowerCase())}(r)?function(e){return["zip","tar","gz","rar","7z"].includes(e.toLowerCase())}(r)&&(a=m.b):a=m.q,"dir"===e&&(a=b.e),t&&(a=m.j),a}var B=function(e){var t=g.a.unix(e);return t.isBefore(g()().subtract(1,"day"))?t.format("MM/DD/YYYY"):t.format("h:mm a")},P=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function M(e){return["mp3","wav","ogg","flac"].includes(e.toLowerCase())}function _(e){return["jpg","jpeg","png","gif"].includes(e.toLowerCase())}function L(e){var t=0,n=0;e.forEach((function(e){var r=e.path.split("/"),a=F(r[r.length-1]);M(a)&&t++,_(a)&&n++}));var r=Math.round(t/e.length*100),a=Math.round(n/e.length*100);return r>60?"audio":a>60?"image":"default"}var U=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||window.RTCPeerConnection},30:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(51);function a(e){return{type:r.b.SET_STATUS,status:e}}function c(e){return{type:r.b.SET_SHARE_DATA,shareData:e}}},317:function(e,t,n){"use strict";(function(e){var r=n(2),a=n.n(r),c=n(9),o=n(16),i=n(1),s=n.n(i),l=(n(326),n(213)),u=n(571),f=n(81),d=n(210),p=n(560),m=n.n(p),b=n(561),v=n.n(b),g=n(211),h=n(212),y=n(562),j=n(573),O=n(35),E=n(60),w=n(30),x=n(173),k=n(563),C=n(29),S=n(79),F=n.n(S),I=n(117),D=n.n(I);t.a=Object(h.hot)(e)((function(e){var t=e.match,n=Object(f.a)(),r=Object(d.a)(),p=Object(i.useRef)(null),b=Object(i.useState)(!1),h=Object(o.a)(b,2),S=h[0],I=h[1],R=Object(i.useRef)({}),T=Object(i.useState)(!1),A=Object(o.a)(T,2),z=A[0],N=A[1],B=Object(i.useState)([]),P=Object(o.a)(B,2),M=P[0],_=P[1],L=Object(i.useState)("/r"),U=Object(o.a)(L,2),Y=U[0],H=U[1],K=Object(i.useState)(null),W=Object(o.a)(K,2),G=W[0],V=W[1],X=Object(i.useState)("files"),q=Object(o.a)(X,2),Z=q[0],J=q[1],$=t.params.importInstanceAddress,Q=decodeURIComponent($),ee=Object(O.c)(),te=Object(O.d)((function(e){return e.main})),ne=te.instances,re=te.instanceIndex,ae=ne[re],ce=Object(x.a)(re),oe=Object(x.a)(ne.length),ie={container:{position:"relative",display:n?"block":"flex",flexDirection:"row",height:"100%"}};return Object(i.useEffect)((function(){oe&&oe!==ne.length&&ee(Object(E.e)(ne.length-1))}),[ne.length]),Object(i.useEffect)((function(){!function(){if(Q&&D.a.isValid(Q)){var e=D.a.parse(Q);ne.find((function(t){return t.address===e.toString()}))||ee(Object(E.a)(e.path,e.toString()))}}()}),[Q]),Object(i.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z&&(t=R.current.fs.ls(Y).map((function(e){var t=R.current.fs.content(e),n=e.split("/");return{path:e,name:n[n.length-1],type:t}})),_(t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[z,Y,G]),Object(i.useEffect)((function(){S&&function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,i,s,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("switch"),ee(Object(w.b)({message:"Initializing"})),r=p.current,!ne.length){e.next=7;break}n=ae.address,e.next=12;break;case 7:return c={meta:"superdrive"},e.next=10,r.determineAddress("main",c);case 10:n=e.sent,ee(Object(E.a)(n.path,n.toString()));case 12:if(e.t0=r.mounted[n.toString()],e.t0){e.next=17;break}return e.next=16,r.mount(n,{autoStart:!1});case 16:e.t0=e.sent;case 17:if(o=e.t0,s=(i=function(e){return function(t,n){ee(Object(w.b)({message:"[".concat(t,"/").concat(n,"] ").concat(e)})),t===n&&Object(C.a)(2e3).then((function(){return ee(Object(w.b)({}))}))}})("Loading"),o.events.on("db.load.progress",s),l=i("Replicating"),o.events.on("db.replicate.progress",l),u=function(){return V(Date.now())},o.events.on("updated",u),o.tearDown=function(){o.events.removeListener("db.load.progress",s),o.events.removeListener("db.replicate.progress",l),o.events.removeListener("updated",u)},R.current.tearDown&&R.current.tearDown(),o.running){e.next=30;break}return e.next=30,o.start();case 30:R.current=o,t?(H("/r"),V(Date.now())):N(!0),ee(Object(w.b)({}));case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ce!==re)}),[S,re,ne]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(Object(w.b)({message:"Connecting"})),e.next=3,m.a.createInstance(t);case 3:return n=e.sent,e.next=6,v.a.create(n);case 6:r=e.sent,p.current=r,I(!0),ee(Object(w.b)({})),window.sailplane=r,window.all=F.a;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.isIpfsReady&&e(r.ipfs)}),[r.ipfs,r.isIpfsReady]),s.a.createElement("div",{style:ie.container},s.a.createElement(l.a,{setCurrentRightPanel:J,currentRightPanel:Z}),z?"files"===Z?s.a.createElement(u.a,{sharedFs:R,ipfs:r.ipfs,directoryContents:M,setCurrentDirectory:H,currentDirectory:Y}):"settings"===Z?s.a.createElement(y.a,null):"instances"===Z?s.a.createElement(j.a,{sailplane:p.current}):void 0:s.a.createElement(g.a,null),s.a.createElement(k.a,null))}))}).call(this,n(216)(e))},322:function(e,t,n){"use strict";(function(e){var r=n(2),a=n.n(r),c=n(9),o=n(16),i=n(1),s=n.n(i),l=(n(326),n(213)),u=n(81),f=n(210),d=n(211),p=n(212),m=n(35),b=n(30),v=n(29),g=n(208),h=n(574),y=n(71);t.a=Object(p.hot)(e)((function(e){var t=e.match.params,n=t.cid,r=t.path,p=t.displayType,j=Object(u.a)(),O=Object(f.a)(),E=Object(i.useState)(!1),w=Object(o.a)(E,2),x=w[0],k=w[1],C=Object(i.useState)(null),S=Object(o.a)(C,2),F=S[0],I=S[1],D=Object(i.useState)(null),R=Object(o.a)(D,2),T=R[0],A=R[1],z=Object(i.useState)(!1),N=Object(o.a)(z,2),B=N[0],P=N[1],M=Object(i.useState)("files"),_=Object(o.a)(M,2),L=_[0],U=_[1],Y=Object(i.useState)(null),H=Object(o.a)(Y,2),K=H[0],W=H[1],G=decodeURIComponent(r),V=decodeURIComponent(n),X=Object(m.c)(),q=G.split("/"),Z=q[q.length-1],J=Object(v.n)(Object(v.e)(Z));Object(i.useEffect)((function(){J&&x&&!K&&"default"===p&&ae()}),[J,x,K,V,r]);var $=Object(y.d)(Z),Q=$.isEncrypted,ee=$.decryptedFilename,te={container:{display:j?"block":"flex",flexDirection:"row",height:"100%"}},ne=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.h)(O.ipfs,V,(function(){console.log("updateping")}));case 2:t=e.sent,I(t.slice(1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.f)(V,O.ipfs);case 2:t=e.sent,A(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ae(){return ce.apply(this,arguments)}function ce(){return(ce=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=4;break}t=K,e.next=9;break;case 4:return e.next=6,Object(v.c)(V,G,O.ipfs,(function(e,t){X(Object(b.b)({message:"[".concat(Math.round(e/t*100),"%] Downloading")}))}));case 6:t=e.sent,X(Object(b.b)({})),W(t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.useEffect)((function(){O.isIpfsReady&&!x&&(k(!0),p&&ne(),re())}),[O.ipfs,O.isIpfsReady,x,p,V]);var oe=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(Object(b.b)({message:"Fetching file"})),e.next=3,ae();case 3:if(n=e.sent,!Q){e.next=10;break}return X(Object(b.b)({message:"Decrypting file"})),e.next=8,Object(y.a)(n,t);case 8:n=e.sent,X(Object(b.b)({}));case 10:Object(g.saveAs)(n,ee),P(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{style:te.container},s.a.createElement(l.a,{setCurrentRightPanel:U,currentRightPanel:L}),x?s.a.createElement(h.a,{handleDownload:oe,ready:x,path:G,cid:V,files:F,displayType:p,downloadComplete:B,fileInfo:T,fileBlob:K}):s.a.createElement(d.a,null))}))}).call(this,n(216)(e))},326:function(e,t,n){},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={ADD_INSTANCE:"ADD_INSTANCE",REMOVE_INSTANCE:"REMOVE_INSTANCE",SET_INSTANCE_INDEX:"SET_INSTANCE_INDEX",SET_ENCRYPTION_KEY:"SET_ENCRYPTION_KEY",CLEAR_ENCRYPTION_KEY:"CLEAR_ENCRYPTION_KEY"},a={SET_STATUS:"SET_STATUS",SET_SHARE_DATA:"SET_SHARE_DATA"}},562:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(209),a=n(1),c=n.n(a),o={container:{padding:10,backgroundColor:"#FFF",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",boxSizing:"border-box"}};function i(e){return Object(r.a)(e),c.a.createElement("div",{style:o.container})}},563:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(33),a=n(89),c=n(1),o=n.n(c),i=n(28),s=(n(1410),{menuItem:{marginLeft:4,fontSize:14}}),l=function(){return o.a.createElement(a.Menu,{id:"menu-id"},o.a.createElement(a.Item,{className:"MenuItem",onClick:function(e){return e.props.handleDownload()}},o.a.createElement(i.d,{size:16,style:s.icon}),o.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Download")),o.a.createElement(a.Item,{className:"MenuItem",onClick:function(e){return e.props.handleEdit()}},o.a.createElement(i.e,{size:16,style:s.icon}),o.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Rename")),o.a.createElement(a.Item,{className:"MenuItem",onClick:function(e){return e.props.handleShare()}},o.a.createElement(i.m,{size:16,style:s.icon}),o.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Share")),o.a.createElement(a.Separator,null),o.a.createElement(a.Item,{className:"MenuItem delete",onClick:function(e){return e.props.handleDelete()}},o.a.createElement(i.n,{size:16,style:s.icon}),o.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Delete")))}},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(16),a=n(1),c=n.n(a),o=n(11),i=n(80),s=n(552);function l(e){var t=e.iconComponent,n=e.onClick,a=e.size,l=e.changeColor,u=e.tooltip,f=e.title,d=e.defaultColor,p=e.id,m=e.className,b=Object(i.a)(),v=Object(r.a)(b,2),g=v[0],h=v[1],y=Object(s.a)(),j=Object(r.a)(y,2),O=j[0],E=j[1],w=t,x=E.width?E.width:0;d||(d=o.g),l||(l=o.a);var k={container:{position:"relative",display:"inline-block",cursor:"pointer",padding:4,fontSize:14},popover:{position:"absolute",top:-30,backgroundColor:o.e,color:"#FFF",padding:"4px 6px",borderRadius:2,left:-x/2+8,fontSize:14,fontWeight:400,zIndex:1e3},title:{textDecoration:h?"underline":"none",fontSize:13,color:o.c}};return c.a.createElement("div",{id:p,className:m,style:k.container,ref:g,onClick:function(e){e.stopPropagation(),n()}},t?c.a.createElement(w,{color:h?l:d,size:a||16,style:k.icon}):null,f?c.a.createElement("span",{style:k.title},f):null,h&&u?c.a.createElement("div",{style:k.popover,ref:O},u):null)}},571:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r=n(2),a=n.n(r),c=n(9),o=n(33),i=n(16),s=n(1),l=n.n(s),u=n(11),f=n(28),d=n(80),p=n(57),m=n(207),b=n(29),v=n(208),g=n(174),h=n(75),y=n(35),j=n(30),O=n(71);var E=n(81),w=n(89);function x(e){var t=e.data,n=e.sharedFs,r=e.setCurrentDirectory,x=e.ipfs,k=e.fileIndex,C=e.isParent,S=t.path,F=t.type,I=S.split("/"),D=I[I.length-1],R=Object(d.a)(),T=Object(i.a)(R,2),A=T[0],z=T[1],N=Object(s.useState)(null),B=Object(i.a)(N,2),P=B[0],M=B[1],_=Object(s.useState)(null),L=Object(i.a)(_,2),U=L[0],Y=L[1],H=Object(s.useState)(!1),K=Object(i.a)(H,2),W=K[0],G=K[1],V=Object(s.useState)(null),X=Object(i.a)(V,2),q=X[0],Z=X[1],J=Object(s.useState)(!1),$=Object(i.a)(J,2),Q=$[0],ee=$[1],te=function(e){var t=l.a.useState(null),n=Object(i.a)(t,2),r=n[0],a=n[1],c=l.a.useRef(0),o=l.a.useRef(null),s=l.a.useRef(null),u=l.a.useCallback((function(e){a(e),u.current=e}),[]);return l.a.useEffect((function(){s.current=e})),l.a.useEffect((function(){function e(){var e=c.current+1===2,t=o.current;if(t&&e&&(clearTimeout(o.current),o.current=null,c.current=0,s.current&&s.current()),!t){c.current=c.current+1;var n=setTimeout((function(){clearTimeout(o.current),o.current=null,c.current=0}),200);o.current=n}}return r&&r.addEventListener("click",e),function(){r&&r.removeEventListener("click",e)}}),[r]),[u,r]}((function(){return G(!0)})),ne=Object(i.a)(te,1)[0],re=I.slice(0,I.length-1).join("/"),ae=Object(b.e)(D),ce=Object(E.a)(),oe={outer:{borderRadius:4,color:u.j,fontSize:14,padding:7,marginBottom:8,fontFamily:"Open Sans",userSelect:"none"},container:{display:"flex",flexDirection:"row",flexWrap:ce?"wrap":"nowrap",justifyContent:"space-between",cursor:"pointer"},flexItem:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flexGrow:2,marginBottom:ce?10:0},icon:{marginRight:4,width:30,flexShrink:0},tools:{display:"flex",justifyContent:"flex-end",width:"100%",opacity:(z||q||Q)&&!C?1:0,pointerEvents:(z||q||Q)&&!C?null:"none",fontSize:14,marginLeft:Q?8:0},filename:{textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},ie=Object(O.d)(D),se=ie.isEncrypted,le=ie.decryptedFilename,ue=ie.passHash,fe=Object(y.c)(),de=Object(h.a)(W,(function(e){return ye(e)}),(function(){return G(!1)}),D,{placeholder:""}),pe=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t);case 2:if(e.sent){e.next=14;break}return ee(!1),e.next=7,je();case 7:return n=e.sent,fe(Object(j.b)({message:"Decrypting file"})),e.next=11,Object(O.a)(n,t);case 11:n=e.sent,fe(Object(j.b)({})),Ee(n,le);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.b)(t,ue);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=Object(h.a)(Q,(function(e){return pe(e)}),(function(){return ee(!1)}),"",{placeholder:"password",isPassword:!0,isError:me}),ve=Object(b.i)(F,se,D),ge=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.read(S);case 2:return t=e.sent,e.next=5,Object(b.f)(t,x);case 5:return r=e.sent,Y(r),M(t),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){"dir"!==F&&ge()}),[S]);var he=ve,ye=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,fe(Object(j.b)({message:"Renaming file"})),e.next=4,n.current.move(S,re,t);case 4:fe(Object(j.b)({})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error moving!",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function je(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=13;break}if(fe(Object(j.b)({message:"Fetching download"})),n=P,P){e.next=7;break}return e.next=6,ge();case 6:n=e.sent;case 7:return e.next=9,Object(b.c)(n,S,x,(function(e,t){fe(Object(j.b)({message:"[".concat(Math.round(e/t*100),"%] Downloading")}))}));case 9:t=e.sent,fe(Object(j.b)({})),e.next=14;break;case 13:t=q;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee=function(e,t){"dir"===F&&(t="".concat(t,".zip")),Object(v.saveAs)(e,t)},we=function(){fe(Object(j.a)({name:D,CID:P,path:S,pathType:F}))},xe=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se){e.next=3;break}return ee(!0),e.abrupt("return");case 3:return e.next=5,je();case 5:t=e.sent,Ee(t,D);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe(Object(j.b)({message:"Deleting ".concat("dir"===F?"folder":"file")})),e.next=3,n.current.remove(S);case 3:fe(Object(j.b)({}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(g.b,{draggableId:S,index:k},(function(e,t){var n=e.innerRef,i=e.draggableProps,s=e.dragHandleProps;return l.a.createElement("div",Object.assign({ref:n},i,s,{style:Object(b.d)(i.style,t)}),function(e){return e||(e={}),l.a.createElement("div",{className:"fileItem ".concat(se?"fileItemEncrypted":null)},l.a.createElement("div",{onContextMenu:function(e){e.preventDefault(),w.contextMenu.show({event:e,id:"menu-id",props:{handleDelete:Ce,handleDownload:xe,handleShare:we,handleEdit:ke}})},style:Object(o.a)(Object(o.a)({},oe.outer),{},{border:z||q||e.isDragging?"1px solid ".concat(u.d):"1px solid #FFF",backgroundColor:e.combineTargetFor&&"dir"===F?u.d:"#FFF"})},l.a.createElement("div",{style:oe.container,ref:A,onClick:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!W){e.next=3;break}return e.abrupt("return");case 3:if("dir"!==F){e.next=7;break}r(S),e.next=17;break;case 7:if(q||!Object(b.n)(ae)){e.next=16;break}return fe(Object(j.b)({message:"Fetching preview"})),e.next=11,je();case 11:n=e.sent,fe(Object(j.b)({})),Z(n),e.next=17;break;case 16:Z(null);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l.a.createElement("div",{style:Object(o.a)(Object(o.a)({},oe.flexItem),{},{maxWidth:ce?null:"25%"})},l.a.createElement(he,{color:u.h,size:16,style:oe.icon}),W?l.a.createElement(l.a.Fragment,null,de):C?". . /":l.a.createElement("span",{ref:ne,style:oe.filename},le)),l.a.createElement("div",{style:Object(o.a)(Object(o.a)({},oe.flexItem),{},{justifyContent:"flex-end"})},"dir"!==F&&U?Object(b.k)(U.size):null),l.a.createElement("div",{style:Object(o.a)(Object(o.a)({},oe.flexItem),{},{justifyContent:"flex-end"})},"dir"!==F&&U&&U.mtime?Object(b.g)(U.mtime.secs):null),l.a.createElement("div",{style:oe.tools},Q?l.a.createElement(l.a.Fragment,null,be):l.a.createElement("div",null,l.a.createElement(p.a,{id:"Share-".concat(F),iconComponent:f.m,changeColor:u.c,tooltip:"Share",onClick:we}),l.a.createElement(p.a,{id:"Download-".concat(F),iconComponent:f.d,changeColor:u.c,tooltip:"Download",onClick:xe}),l.a.createElement(p.a,{id:"Edit-".concat(F),iconComponent:f.e,changeColor:u.c,tooltip:"Rename",onClick:ke}),l.a.createElement(p.a,{id:"Delete-".concat(F),iconComponent:f.n,tooltip:"Delete",onClick:Ce})))),q?l.a.createElement("div",{style:oe.preview},l.a.createElement(m.a,{blob:q,filename:D})):null))}(t))}))}var k=n(82),C=n(572),S=n(557),F=n.n(S);function I(e,t){var n=e.children,r=e.sharedFs,o=e.currentDirectory,i={container:{cursor:"pointer",textAlign:"center",color:u.j,fontSize:16,fontWeight:200,fontFamily:"Open Sans",outline:0,userSelect:"none",height:"100%"}},f=Object(y.c)(),d=Object(y.d)((function(e){return e.main.encryptionKey})),p=Object(s.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,i,s,l,u,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=26;break}n=[],c=0,i=Object(k.a)(t),e.prev=4,i.s();case 6:if((s=i.n()).done){e.next=17;break}return l=s.value,c++,f(Object(j.b)({message:"[".concat(c,"/").concat(t.length,"] Encrypting ").concat(l.path)})),e.next=12,Object(O.c)(l,d.key);case 12:u=e.sent,f(Object(j.b)({})),n.push(u);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:t=n;case 26:return f(Object(j.b)({message:"Uploading"})),p=F()(t,{preserveMtime:!0}),m=t.reduce((function(e,t){return t.size+e}),0),e.next=31,r.current.upload(o,p,{progress:function(e){var t=Math.round(e/m*100);f(Object(j.b)({message:"[".concat(t,"%] Uploading files")}))}});case 31:f(Object(j.b)({}));case 32:case"end":return e.stop()}}),e,null,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}(),[o,d]),m=Object(C.a)({onDrop:p,noClick:!0}),b=m.getRootProps,v=m.getInputProps,g=m.isDragActive,h=m.open;return Object(s.useImperativeHandle)(t,(function(){return{openUpload:function(){h()}}})),l.a.createElement("div",Object.assign({},b(),{style:i.container,id:"dropZone"}),l.a.createElement("input",Object.assign({},v(),{id:"fileUpload"})),g?l.a.createElement("p",null,"Drop the files here..."):l.a.createElement("div",null,n))}I=Object(s.forwardRef)(I);var D=n(62),R=n(209);function T(e){var t=e.name,n=e.onClick,r=Object(d.a)(),a=Object(i.a)(r,2),c=a[0],o=a[1],s={container:{backgroundColor:o?u.h:"#FFF",color:o?"#FFF":u.h,padding:"6px 10px",display:"block",minWidth:7.5*t.length}};return l.a.createElement("div",{style:s.container,ref:c,onClick:n},t)}var A=n(60);function z(e){Object(R.a)(e);var t=Object(y.d)((function(e){return e.main})),n=Object(y.c)(),r=t.instances,a=t.instanceIndex,c=r[a],o=Object(s.useState)(!1),f=Object(i.a)(o,2),d=f[0],p=f[1],m=r.filter((function(e){return e!==c})),b={container:{display:r.length>1?"block":"none",position:"relative",marginRight:6,backgroundColor:u.h,color:"#FFF",padding:"4px 6px",borderRadius:"4px 4px ".concat(d?0:4,"px ").concat(d?0:4,"px"),fontSize:14},menu:{backgroundColor:"#FFF",position:"absolute",top:26,left:0,border:"1px solid ".concat(u.h),color:u.h}};return l.a.createElement("span",{style:b.container,onClick:function(){m.length&&p(!d)}},c.name,d?l.a.createElement("div",{style:b.menu},m.map((function(e,t){return l.a.createElement(T,{key:t,name:e.name,onClick:function(){var t=r.findIndex((function(t){return t===e}));n(Object(A.e)(t))}})}))):null)}var N={container:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:16,marginBottom:10,color:u.h,fontFamily:"Open Sans",fontWeight:600,userSelect:"none"},icon:{marginRight:4},root:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",fontWeight:400},folderIcon:{marginLeft:4,marginRight:4},folderName:{fontWeight:400,cursor:"pointer",marginLeft:2,marginRight:2}};function B(e){var t=e.currentDirectory,n=e.setCurrentDirectory,r=t.split("/").slice(2);return l.a.createElement("div",{style:N.container},l.a.createElement("div",{onClick:function(){return n("/r")},style:N.root},l.a.createElement(D.b,{color:u.h,size:16,style:N.icon}),l.a.createElement(z,null)," /"),r.map((function(e,t){for(var a="/r",c=0;c<=t;c++)a+="/".concat(r[c]);return l.a.createElement("span",{key:e},l.a.createElement("span",{style:N.folderName,className:"folderName",onClick:function(){n(a)}},e),"/")})))}var P={tools:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontFamily:"Open Sans"},rightTools:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}};function M(e){var t=e.currentDirectory,n=e.sharedFs,r=e.setCurrentDirectory,o=e.handleOpenUpload,d=Object(s.useState)(!1),m=Object(i.a)(d,2),b=m[0],v=m[1],g=Object(s.useState)(!1),O=Object(i.a)(g,2),E=O[0],w=O[1],x=Object(y.c)(),k=Object(y.d)((function(e){return e.main.encryptionKey})),C=t.split("/"),S=C[C.length-1],F=function(){var e=Object(c.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.current.mkdir(t,r);case 3:v(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Mkdir error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),I=Object(h.a)(b,(function(e){return F(e)}),(function(){return v(!1)}),"",{placeholder:"new folder"}),D=Object(h.a)(E,(function(e){return function(e){x(Object(A.d)(e,"string")),w(!1)}(e)}),(function(){return w(!1)}),"",{placeholder:"secure password",isPassword:!0});return l.a.createElement("div",null,l.a.createElement("div",{style:P.tools},l.a.createElement("div",{style:P.leftTools},l.a.createElement(B,{currentDirectory:t,setCurrentDirectory:r})),l.a.createElement("div",{style:P.rightTools},b||E?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{id:"togglePassword",iconComponent:k?f.j:f.o,size:18,defaultColor:k?u.b:null,changeColor:k?u.a:u.b,onClick:function(){k?x(Object(A.b)()):w(!0)}}),"/r"!==t?l.a.createElement(p.a,{id:"folderShare",iconComponent:f.m,size:18,changeColor:u.c,onClick:function(){x(Object(j.a)({name:S,path:t,pathType:"dir"}))}}):null,l.a.createElement(p.a,{iconComponent:f.p,size:18,changeColor:u.c,onClick:function(){o()}}),l.a.createElement(p.a,{id:"addFolder",iconComponent:f.g,size:18,changeColor:u.c,onClick:function(){return v(!0)}})),b?l.a.createElement(l.a.Fragment,null,I):null,E?l.a.createElement(l.a.Fragment,null,D):null)))}var _=n(141);function L(e){var t=e.onSelect,n=e.items,r=e.currentIndex,a={container:{display:"flex",alignItems:"center"},item:{display:"flex",alignItems:"center",padding:6,borderRadius:4,cursor:"pointer"}};return l.a.createElement("div",{style:a.container},n.map((function(e,c){var i=e.icon;return l.a.createElement("div",{id:"shareType-".concat(n[c].name),style:Object(o.a)(Object(o.a)({},a.item),{},{backgroundColor:c===r?u.h:null}),onClick:function(){t(c)}},l.a.createElement(i,{color:c===r?"#FFF":u.h,size:16,style:a.icon}))})))}var U={container:{position:"absolute",backgroundColor:"#FFF",border:"1px solid ".concat(u.h),borderRadius:4,top:150,left:"50%",transform:"translateX(-50%)",width:"80%",fontFamily:"Open Sans",zIndex:1e4},header:{backgroundColor:u.h,color:"#FFF",padding:8,fontSize:14,display:"flex",justifyContent:"space-between",alignItems:"center"},body:{padding:14},filename:{color:u.h},input:{border:"1px solid ".concat(u.e),borderRadius:4,color:u.c,fontSize:14,fontWeight:200,padding:4,display:"inline-flex",flexGrow:2,marginTop:8},flex:{display:"flex"},xIcon:{cursor:"pointer"},link:{marginTop:8,color:"".concat(u.h," !important"),fontSize:14},loading:{display:"flex",alignItems:"center",color:u.h,marginTop:10,fontSize:14},icon:{marginRight:4},nameHolder:{display:"flex",justifyContent:"space-between",alignItems:"center"}},Y=[{name:"default",icon:f.f},{name:"image",icon:f.h},{name:"audio",icon:f.k}];function H(e){var t=e.sharedFs,n=Object(y.c)(),r=Object(y.d)((function(e){return e.tempData.shareData})),o=Object(s.useRef)(null),d=r.CID,p=r.path,m=r.name,v=r.pathType,g=Object(s.useState)(0),h=Object(i.a)(g,2),O=h[0],E=h[1],w=Object(s.useState)(d),x=Object(i.a)(w,2),k=x[0],C=x[1];if(Object(s.useEffect)((function(){m?C(d):(C(null),E(0))}),[m,d]),Object(s.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current.read(p);case 2:n=e.sent,C(n),"dir"===v&&(r=t.current.fs.ls(p).map((function(e){var n=t.current.fs.content(e),r=p.split("/");return{path:e,name:r[r.length-1],type:n}})),c=Object(b.j)(r),o=Y.findIndex((function(e){return e.name===c})),E(o));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!k&&p?e():o.current&&o.current.select()}),[k,p]),!p)return null;var S="".concat(window.location.origin+window.location.pathname,"#/download/").concat(encodeURIComponent(k),"/").concat(encodeURIComponent(p),"/").concat(Y[O].name);return l.a.createElement("div",{style:U.container},l.a.createElement("div",{style:U.header},l.a.createElement("div",null,"Share options"),l.a.createElement(D.h,{color:"#FFF",size:16,style:U.xIcon,onClick:function(){n(Object(j.a)({}))}})),l.a.createElement("div",{style:U.body},l.a.createElement("div",{style:U.nameHolder},l.a.createElement("div",{style:U.filename},m),l.a.createElement("div",null,"dir"===v?l.a.createElement(L,{currentIndex:O,items:Y,onSelect:function(e){return E(e)}}):null)),k?l.a.createElement("div",null,l.a.createElement("div",{style:U.flex},l.a.createElement("input",{ref:o,style:U.input,type:"text",value:S,readOnly:!0})),l.a.createElement("div",{style:U.link},l.a.createElement("a",{href:S,className:"link",target:"_blank"},"Open link"))):l.a.createElement("div",{style:U.loading},l.a.createElement(f.i,{color:u.h,size:16,style:U.icon,className:"rotating"}),"Loading share link...")))}var K={container:{position:"relative",padding:10,backgroundColor:"#FFF",width:"100%",display:"flex",flexDirection:"column",fontFamily:"Open Sans",boxSizing:"border-box",height:"100%"},fileHeader:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid ".concat(u.d),paddingBottom:10,marginBottom:4},fileHeaderItem:{width:"100%",color:u.f,fontSize:12,letterSpacing:1.08,textAlign:"left"},files:{backgroundColor:"#FFF"},dropContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",flexGrow:2,opacity:1,height:"100%",overflowY:"auto"}};function W(e){var t=e.sharedFs,n=e.ipfs,r=e.directoryContents,i=e.setCurrentDirectory,u=e.currentDirectory,f=Object(E.a)(),d=Object(s.useRef)(null),p=r.sort((function(e,t){return e.name<t.name?-1:1})),m=p.filter((function(e){return"dir"===e.type})),b=p.filter((function(e){return"dir"!==e.type})),v=m.concat(b),h=u.split("/"),y=h.slice(0,h.length-1).join("/");return l.a.createElement("div",{style:K.container},l.a.createElement(M,{currentDirectory:u,sharedFs:t,setCurrentDirectory:i,handleOpenUpload:function(){d.current.openUpload()}}),l.a.createElement("div",{style:K.fileHeader},l.a.createElement("div",{style:Object(o.a)(Object(o.a)({},K.fileHeaderItem),{},{paddingLeft:12})},"Name"),f?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:Object(o.a)(Object(o.a)({},K.fileHeaderItem),{},{textAlign:"right"})},"Size"),l.a.createElement("div",{style:Object(o.a)(Object(o.a)({},K.fileHeaderItem),{},{textAlign:"right"})},"Modified")),l.a.createElement("div",{style:K.fileHeaderItem})),l.a.createElement("div",{style:K.dropContainer},l.a.createElement(I,{sharedFs:t,currentDirectory:u,ref:d},l.a.createElement(g.a,{onDragEnd:function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.combine){e.next=5;break}return r=n.draggableId.split("/"),c=r[r.length-1],e.next=5,t.current.move(n.draggableId,n.combine.draggableId,c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l.a.createElement(g.c,{droppableId:"droppable-1",type:"fileblock",isCombineEnabled:!0},(function(e,a){return l.a.createElement("div",{style:K.filesContainer},"/r"!==u?l.a.createElement(x,{fileIndex:0,isParent:!0,key:y,data:{path:y,type:"dir"},sharedFs:t,ipfs:n,setCurrentDirectory:i}):null,l.a.createElement("div",Object.assign({ref:e.innerRef,style:{}},e.droppableProps),r.length?l.a.createElement("div",{style:K.files},v.map((function(e,r){return l.a.createElement(x,{fileIndex:r+1,key:e.path,data:e,sharedFs:t,ipfs:n,setCurrentDirectory:i})}))):l.a.createElement("p",null,"drag files to upload"),l.a.createElement("span",{style:{display:"none"}},e.placeholder)))}))))),l.a.createElement(_.a,null),l.a.createElement(H,{sharedFs:t}))}},573:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(2),a=n.n(r),c=n(9),o=n(16),i=n(1),s=n.n(i),l=n(11),u=n(80),f=n(57),d=n(28),p=n(35),m=n(30),b=n(29);var v=s.a.memo((function(e){var t=e.data,n=e.selected,r=e.onClick,a=e.onDelete,c=Object(u.a)(),v=Object(o.a)(c,2),g=v[0],h=v[1],y=function(e){var t=e.message,n=Object(p.c)(),r=Object(i.useRef)(null);return[r,function(){var e=document.createRange();e.selectNode(r.current),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),n(Object(m.b)({message:t,isInfo:!0})),Object(b.a)(100).then((function(){return window.getSelection().removeRange(e)})),Object(b.a)(2e3).then((function(){return n(Object(m.b)({}))}))}]}({message:"Instance address copied"}),j=Object(o.a)(y,2),O=j[0],E=j[1],w=t.name,x=t.address,k=n?l.e:l.d,C={outer:{padding:8,backgroundColor:k,border:"1px solid ".concat(h?l.e:k),color:n?"#FFF":l.h,borderRadius:4,marginBottom:4,fontFamily:"Open Sans",cursor:"pointer"},container:{display:"flex",justifyContent:"space-between",alignItems:"center"},address:{marginLeft:10,fontSize:14,overflow:"hidden"},tools:{display:"flex",justifyContent:"flex-end",marginTop:10},toolItem:{marginLeft:10},name:{fontSize:20}},S="instance-".concat(x),F="".concat(window.location.origin+window.location.pathname,"#/importInstance/").concat(encodeURIComponent(x));return s.a.createElement("div",{style:C.outer,ref:g,onClick:function(e){e.stopPropagation(),r()}},s.a.createElement("div",{style:C.container},s.a.createElement("div",{style:C.name},w),s.a.createElement("div",{id:S,style:C.address,ref:O},F)),s.a.createElement("div",{style:C.tools},s.a.createElement("div",{style:C.toolItem},s.a.createElement(f.a,{defaultColor:n?l.d:l.h,iconComponent:d.c,size:16,changeColor:l.c,onClick:E})),s.a.createElement("div",{style:C.toolItem},s.a.createElement(f.a,{className:"instanceDelete",defaultColor:n?l.d:l.h,iconComponent:d.n,size:16,changeColor:l.a,onClick:function(){return a()}}))))})),g=n(75),h=n(60),y=n(117),j=n.n(y),O=n(141),E=n(173),w={container:{position:"relative",padding:10,backgroundColor:"#FFF",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",fontFamily:"Open Sans",boxSizing:"border-box"},title:{color:l.g,fontSize:20,fontWeight:600,marginBottom:16},header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",marginTop:10},icon:{cursor:"pointer",marginRight:4},tools:{display:"flex",justifyContent:"flex-end",alignItems:"center",color:l.g,fontSize:14},toolTitle:{marginRight:6}};function x(e){var t=e.sailplane,n=Object(i.useState)(!1),r=Object(o.a)(n,2),u=r[0],f=r[1],m=Object(i.useState)(!1),b=Object(o.a)(m,2),y=b[0],x=b[1],k=Object(p.c)(),C=Object(p.d)((function(e){return e.main})),S=C.instances,F=C.instanceIndex,I=Object(E.a)(S.length);Object(i.useEffect)((function(){I&&I!==S.length&&k(Object(h.e)(S.length-1))}),[S.length,I]);var D=function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.determineAddress(n,{meta:"superdrive"});case 2:r=e.sent,k(Object(h.a)(r.path,r.toString())),f(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.a.isValid(t)&&(t=j.a.parse(t),k(Object(h.a)(t.path,t.toString())),x(!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(g.a)(y,(function(e){return R(e)}),(function(){return x(!1)}),"",{placeholder:"instance address"}),A=Object(g.a)(u,(function(e){return D(e)}),(function(){return f(!1)}),"",{placeholder:"instance name"});return s.a.createElement("div",{style:w.container},s.a.createElement("div",{style:w.header},s.a.createElement("div",{style:w.title},"Instances"),s.a.createElement("div",{style:w.tools},y||u?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:w.tools,className:"addInstance",onClick:function(){return x(!0)}},s.a.createElement(d.p,{color:l.g,size:18,style:w.icon}),s.a.createElement("span",{style:w.toolTitle},"Import instance")),s.a.createElement("div",{style:w.tools,className:"addInstance",onClick:function(){return f(!0)}},s.a.createElement(d.l,{color:l.g,size:18,style:w.icon}),s.a.createElement("span",{style:w.toolTitle},"Create instance"))),y?T:null,u?A:null)),s.a.createElement("div",null,S.map((function(e,t){return s.a.createElement(v,{key:e.address.toString(),data:e,selected:e===S[F],onClick:function(){k(Object(h.e)(t))},onDelete:function(){k(Object(h.c)(t))}})}))),s.a.createElement(O.a,null))}},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(2),a=n.n(r),c=n(9),o=n(16),i=n(1),s=n.n(i),l=n(141),u=n(11),f=n(71),d=n(28),p=n(75),m=n(29);function b(e){var t=e.file,n=e.onLoadURL,r=(e.fileURLS,e.fileIndex),l=e.onClick,f=Object(i.useState)(null),d=Object(o.a)(f,2),p=d[0],b=d[1],v=Object(i.useState)(0),g=Object(o.a)(v,2),h=g[0],y=g[1],j={container:{padding:8,color:u.h,fontSize:14},img:{padding:8,background:"center/cover url(".concat(p,")"),minWidth:140,minHeight:200,justifyContent:"center",alignItems:"center",display:"flex",cursor:"pointer"}};function O(){return(O=Object(c.a)(a.a.mark((function e(){var c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.b)(t,(function(e,t){y(Math.round(e/t*100))}));case 3:c=e.sent,o=window.URL.createObjectURL(c),b(o),n(o,r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("err filetoblob",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){O.apply(this,arguments)}()}),[]),s.a.createElement("div",{style:j.container},s.a.createElement("div",{className:"imageGalleryBlock",style:j.img,onClick:function(){return l()}},p?null:s.a.createElement("div",null,h,"%")))}var v=n(564);n(1421);function g(e){var t=e.files;console.log("fls",t);var n=Object(i.useState)(!1),r=Object(o.a)(n,2),a=r[0],c=r[1],l=Object(i.useState)(0),u=Object(o.a)(l,2),f=u[0],d=u[1],p=Object(i.useState)(new Array(1e3)),g=Object(o.a)(p,2),h=g[0],y=g[1],j=t?t.filter((function(e){var t=Object(m.e)(e.name);return Object(m.m)(t)})):null;return s.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center",flexWrap:"wrap"}},a&&h[f]?s.a.createElement(v.a,{mainSrc:h[f],nextSrc:h[f+1],prevSrc:h[f-1],onMoveNextRequest:function(){return d(f+1)},onMovePrevRequest:function(){return d(f-1)},onCloseRequest:function(){return c(!1)}}):null,j?j.map((function(e,t){return s.a.createElement(b,{key:t,file:e,fileURLS:h,fileIndex:t,onClick:function(){h[t]&&(d(t),c(!0))},onLoadURL:function(e){var n=h;n[t]=e,y(n)}})})):null)}var h=n(207),y={container:{position:"relative",padding:10,paddingTop:20,backgroundColor:"#FFF",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",boxSizing:"border-box"},filename:{color:u.h,fontSize:20,textAlign:"center"},fileSize:{fontSize:14,textAlign:"center",color:u.h},downloadButton:{display:"inline-block",backgroundColor:u.h,color:"#FFF",borderRadius:4,padding:12,marginTop:10,cursor:"pointer"},icon:{marginRight:4},passwordContainer:{marginTop:10},downloadButtonHolder:{textAlign:"center",marginBottom:8},previewBlock:{display:"flex",justifyContent:"center",marginTop:10}};function j(e){var t=e.ready,n=e.path,r=e.handleDownload,b=e.downloadComplete,v=e.displayType,j=e.files,O=e.fileInfo,E=e.fileBlob,w=n.split("/"),x=w[w.length-1],k=Object(i.useState)(!1),C=Object(o.a)(k,2),S=C[0],F=C[1],I=Object(i.useState)(!1),D=Object(o.a)(I,2),R=D[0],T=D[1],A=Object(f.d)(x),z=A.isEncrypted,N=A.decryptedFilename,B=A.passHash,P=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(t,B);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:e.sent||(T(!1),r(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Object(p.a)(R,(function(e){return M(e)}),(function(){return T(!1)}),"",{placeholder:"password",isPassword:!0,isError:P,confirmTitle:"Enter"});return s.a.createElement("div",{style:y.container},s.a.createElement("div",null,t?s.a.createElement("div",null,s.a.createElement("div",{style:y.filename},z?s.a.createElement(d.j,{color:u.h,size:16,style:y.icon}):null,N),s.a.createElement("div",{style:y.downloadButtonHolder},R?s.a.createElement("div",{style:y.passwordContainer},_):s.a.createElement("div",{style:y.downloadButton,onClick:function(){z?T(!0):(F(!0),r())}},S&&!b?"Fetching download...":"Download now")),O&&O.size?s.a.createElement("div",{style:y.fileSize},Object(m.k)(O.size)):null,E?s.a.createElement("div",{style:y.previewBlock},s.a.createElement("div",{style:y.preview},s.a.createElement(h.a,{blob:E,filename:x,size:"large"}))):null,"default"!==v?s.a.createElement("div",null,"image"===v?s.a.createElement(g,{files:j}):null):null):s.a.createElement("div",null)),s.a.createElement(l.a,null))}},575:function(e,t,n){e.exports=n(1426)},580:function(e,t,n){},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return s}));var r=n(51);function a(e,t){return{type:r.a.ADD_INSTANCE,name:e,address:t}}function c(e,t){return{type:r.a.SET_ENCRYPTION_KEY,key:e,keyType:t}}function o(){return{type:r.a.CLEAR_ENCRYPTION_KEY}}function i(e){return{type:r.a.SET_INSTANCE_INDEX,index:e}}function s(e){return{type:r.a.REMOVE_INSTANCE,index:e}}},602:function(e,t){},667:function(e,t){},668:function(e,t){},71:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return f}));var r=n(2),a=n.n(r),c=n(9),o=n(29);function i(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.readAsArrayBuffer(e)}))}var s=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s,l,u,f,d,p,m,b,v,g,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t).catch((function(e){console.error(e)}));case 2:return r=e.sent,r=new Uint8Array(r),c=new TextEncoder("utf-8").encode(n),s=window.crypto.getRandomValues(new Uint8Array(8)),e.next=8,window.crypto.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveBits"]).catch((function(e){console.error(e)}));case 8:return l=e.sent,console.log("passphrasekey imported"),e.next=12,window.crypto.subtle.deriveBits({name:"PBKDF2",salt:s,iterations:1e4,hash:"SHA-256"},l,384).catch((function(e){console.error(e)}));case 12:return u=e.sent,console.log("pbkdf2bytes derived"),u=new Uint8Array(u),f=u.slice(0,32),d=u.slice(32),e.next=19,window.crypto.subtle.importKey("raw",f,{name:"AES-CBC",length:256},!1,["encrypt"]).catch((function(e){console.error(e)}));case 19:return p=e.sent,console.log("key imported"),e.next=23,window.crypto.subtle.encrypt({name:"AES-CBC",iv:d},p,r).catch((function(e){console.error(e)}));case 23:if(m=e.sent){e.next=27;break}return console.error("Fuck"),e.abrupt("return");case 27:return console.log("plaintext encrypted"),m=new Uint8Array(m),(b=new Uint8Array(m.length+16)).set(new TextEncoder("utf-8").encode("Salted__")),b.set(s,8),b.set(m,16),(v=new Blob([b],{type:t.type})).name=t.name,e.next=37,Object(o.p)(n);case 37:return g=e.sent,h=g.substr(0,10),v.path="".concat(t.path,".encrypted-sailplane_").concat(h),v.lastModified=t.lastModified,v.lastModifiedDate=t.lastModifiedDate,e.abrupt("return",v);case 43:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,o,s,l,u,f,d,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t).catch((function(e){console.error(e)}));case 2:return r=e.sent,r=new Uint8Array(r),c=new TextEncoder("utf-8").encode(n),o=r.slice(8,16),e.next=8,window.crypto.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveBits"]).catch((function(e){console.error(e)}));case 8:return s=e.sent,console.log("passphrasekey imported"),e.next=12,window.crypto.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:1e4,hash:"SHA-256"},s,384).catch((function(e){console.error(e)}));case 12:return l=e.sent,console.log("pbkdf2bytes derived"),l=new Uint8Array(l),u=l.slice(0,32),f=l.slice(32),r=r.slice(16),e.next=20,window.crypto.subtle.importKey("raw",u,{name:"AES-CBC",length:256},!1,["decrypt"]).catch((function(e){console.error(e)}));case 20:return d=e.sent,console.log("key imported"),e.next=24,window.crypto.subtle.decrypt({name:"AES-CBC",iv:f},d,r).catch((function(e){console.error(e)}));case 24:if(p=e.sent){e.next=27;break}return e.abrupt("return",!1);case 27:return console.log("ciphertext decrypted"),p=new Uint8Array(p),(m=new Blob([p],{type:"application/download"})).name=t.name,m.path=t.path,m.lastModified=t.lastModified,m.lastModifiedDate=t.lastModifiedDate,e.abrupt("return",m);case 35:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(e){var t=Object(o.e)(e);return/encrypted-sailplane/.test(t)?{isEncrypted:!0,passHash:t.split("_")[1],decryptedFilename:e.substring(0,e.length-t.length-1)}:{isEncrypted:!1,decryptedFilename:e}},f=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.p)(t);case 2:if(r=e.sent,r.substr(0,10)===n){e.next=6;break}return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),c=n(9),o=n(16),i=n(1),s=n.n(i),l=n(57),u=n(11);function f(e,t,n,r,f){var d=f.placeholder,p=f.isPassword,m=f.isError,b=f.confirmTitle,v=Object(i.useState)(r),g=Object(o.a)(v,2),h=g[0],y=g[1],j=Object(i.useState)(!1),O=Object(o.a)(j,2),E=O[0],w=O[1],x=Object(i.useRef)(null),k=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(h);case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){m&&k()}),[h]);var C={input:{border:"1px solid ".concat(E?u.a:m?u.b:u.e),borderRadius:4,color:u.c,fontSize:14,fontWeight:200,padding:4,marginRight:4,display:"inline-flex",flexGrow:2}};return Object(i.useEffect)((function(){e?(x.current.focus(),x.current.select()):y(r)}),[e]),s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{ref:x,type:p?"password":"text",placeholder:d,style:C.input,value:h,onChange:function(e){return y(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&t(h)}}),s.a.createElement(l.a,{title:b||"Accept",onClick:function(){return t(h)}}),s.a.createElement(l.a,{title:"Cancel",onClick:function(){return n()}}))}},798:function(e,t){},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(16),a=n(1);function c(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useRef)(null),i=function(){return c(!0)},s=function(){return c(!1)};return Object(a.useEffect)((function(){var e=o.current;if(e)return e.addEventListener("mouseover",i),e.addEventListener("mouseout",s),function(){e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",s)}}),[o.current]),[o,n]}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(16);function c(){return function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=Object(r.useState)(t),c=Object(a.a)(n,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){if(!e)return!1;function n(){i(t())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),o}().width<600}},854:function(e,t){},862:function(e,t){},864:function(e,t){},951:function(e,t){}},[[575,1,2]]]);
//# sourceMappingURL=main.5a041e70.chunk.js.map