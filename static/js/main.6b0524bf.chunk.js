(this["webpackJsonpsailplane-web"]=this["webpackJsonpsailplane-web"]||[]).push([[0],{1004:function(e,t){},1068:function(e,t){},1096:function(e,t){},1098:function(e,t){},1125:function(e,t){},1281:function(e,t){},1283:function(e,t){},1311:function(e,t){},1363:function(e,t){},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n.n(r),c=n(9),i=n(27),o=n(34);function s(){var e=Object(o.d)((function(e){return e.tempData.status})),t=e.message,n=e.isError,r=e.isInfo,s={container:{position:"fixed",bottom:10,backgroundColor:n?c.a:c.e,padding:8,borderRadius:4,fontFamily:"Open Sans",color:"#FFF",fontSize:14,lineHeight:14,display:"flex",alignItems:"center",height:18,opacity:t?1:0},icon:{marginRight:4}},l=i.j;n&&(l=i.a);var u=l;return a.a.createElement("div",{style:s.container},r?null:a.a.createElement(u,{color:"#FFF",size:16,style:s.icon,className:n?"":"rotating"}),a.a.createElement("span",{style:s.message},t))}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}},1441:function(e,t,n){},1447:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(101),i=n.n(c),o=(n(593),n(579)),s=n(47),l=n(326),u=n(332);function d(){return a.a.createElement(o.a,null,a.a.createElement(s.a,{exact:!0,path:"/",component:l.a}),a.a.createElement(s.a,{exact:!0,path:"/importInstance/:importInstanceAddress",component:l.a}),a.a.createElement(s.a,{exact:!0,path:"/download/:cid/:path",component:u.a}),a.a.createElement(s.a,{exact:!0,path:"/download/:cid/:path/:displayType",component:u.a}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=n(34),p=n(580),m=n(51),b=n(335),v=n(581),g=n.n(v),y=n(582),h=n.n(y),j=n(49),O=n(92),E={instances:[],instanceIndex:0,encryptionKey:null,newUser:!0};var x=n(21),w={status:{},shareData:{}};var k=Object(m.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.a.ADD_INSTANCE:var n=t.name,r=t.address,a=t.isImported;return Object(O.a)(e,(function(e){e.instances.push({name:n,address:r,isImported:a})}));case j.a.SET_INSTANCE_INDEX:var c=t.index;return Object(O.a)(e,(function(e){e.instanceIndex=Math.max(0,c)}));case j.a.SET_ENCRYPTION_KEY:var i=t.key,o=t.keyType;return Object(O.a)(e,(function(e){e.encryptionKey={key:i,type:o}}));case j.a.CLEAR_ENCRYPTION_KEY:t.key,t.keyType;return Object(O.a)(e,(function(e){e.encryptionKey=null}));case j.a.REMOVE_INSTANCE:var s=t.index;return Object(O.a)(e,(function(t){t.instances=e.instances.filter((function(e,t){return s!==t})),t.instances[t.instanceIndex]||(console.log("inner ran"),t.instanceIndex=0)}));case j.a.SET_NEW_USER:var l=t.bool;return Object(O.a)(e,(function(e){e.newUser=l}))}return e},tempData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.b.SET_STATUS:return Object(x.a)(Object(x.a)({},e),{},{status:t.status});case j.b.SET_SHARE_DATA:return Object(x.a)(Object(x.a)({},e),{},{shareData:t.shareData})}return e}}),C=n(583),S={key:"root",storage:g.a,blacklist:["tempData"],stateReconciler:h.a},I=Object(b.a)(S,k),F=[],D=Object(C.createLogger)();F.push(D);var T=function(e){var t=Object(m.d)(m.a.apply(void 0,F))(m.e)(I);return{store:t,persistor:Object(b.b)(t)}}(),R=T.store,z=T.persistor;i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(f.a,{store:R},a.a.createElement(p.a,{loading:null,persistor:z},a.a.createElement(d,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(21),a=n(2),c=n.n(a),i=n(8),o=n(13),s=n(1),l=n.n(s),u=n(9),d=n(27),f=n(81),p=n(59),m=n(213),b=n(22),v=n(214),g=n(82),y=n(34),h=n(24),j=n(73);var O=n(57),E=n(91);function x(e){var t=e.data,n=e.sharedFs,a=e.setCurrentDirectory,x=e.ipfs,w=e.isParent,k=e.snapshot,C=e.forceIcon,S=e.onIconClicked,I=e.readOnly,F=t.path,D=t.type,T=F.split("/"),R=T[T.length-1],z=Object(f.a)(),A=Object(o.a)(z,2),N=A[0],B=A[1],P=Object(s.useState)(null),_=Object(o.a)(P,2),M=_[0],U=_[1],L=Object(s.useState)(null),H=Object(o.a)(L,2),W=H[0],Y=H[1],K=Object(s.useState)(!1),G=Object(o.a)(K,2),q=G[0],V=G[1],X=Object(s.useState)(null),Z=Object(o.a)(X,2),J=Z[0],$=Z[1],Q=Object(s.useState)(!1),ee=Object(o.a)(Q,2),te=ee[0],ne=ee[1],re=function(e){var t=l.a.useState(null),n=Object(o.a)(t,2),r=n[0],a=n[1],c=l.a.useRef(0),i=l.a.useRef(null),s=l.a.useRef(null),u=l.a.useCallback((function(e){a(e),u.current=e}),[]);return l.a.useEffect((function(){s.current=e})),l.a.useEffect((function(){function e(){var e=c.current+1===2,t=i.current;t&&e&&(clearTimeout(i.current),i.current=null,c.current=0,s.current&&s.current()),t||(c.current=c.current+1,i.current=setTimeout((function(){clearTimeout(i.current),i.current=null,c.current=0}),200))}return r&&r.addEventListener("click",e),function(){r&&r.removeEventListener("click",e)}}),[r]),[u,r]}((function(){return V(!0)})),ae=Object(o.a)(re,1)[0],ce=T.slice(0,T.length-1).join("/"),ie=Object(b.f)(R),oe=Object(O.a)(),se=n&&n.current.fs.exists(F),le={paddingContainer:{paddingTop:3,paddingBottom:3},outer:{borderRadius:4,color:u.j,fontSize:14,padding:7,marginBottom:8,fontFamily:"Open Sans",userSelect:"none"},container:{display:"flex",flexDirection:"row",flexWrap:oe?"wrap":"nowrap",justifyContent:"space-between",cursor:"pointer"},flexItem:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flexGrow:2,marginBottom:oe?10:0},icon:{marginRight:4,width:30,flexShrink:0},tools:{display:"flex",justifyContent:"flex-end",width:"100%",opacity:(B||J||te)&&!w?1:0,pointerEvents:(B||J||te)&&!w?null:"none",fontSize:14,marginLeft:te?8:0},filename:{textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},ue=Object(j.d)(R),de=ue.isEncrypted,fe=ue.decryptedFilename,pe=ue.passHash,me=Object(y.c)(),be=Object(g.a)(q,(function(e){return Ee(e)}),(function(){return V(!1)}),R,{placeholder:""}),ve=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:if(e.sent){e.next=14;break}return ne(!1),e.next=7,xe();case 7:return n=e.sent,me(Object(h.b)({message:"Decrypting file"})),e.next=11,Object(j.a)(n,t);case 11:n=e.sent,me(Object(h.b)({})),ke(n,fe);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)(t,pe);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=Object(g.a)(te,(function(e){return ve(e)}),(function(){return ne(!1)}),"",{placeholder:"password",isPassword:!0,isError:ge}),he=C||Object(b.j)(D,de,R),je=function(){var e=Object(i.a)(c.a.mark((function e(){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cid){e.next=4;break}r=t.cid,e.next=8;break;case 4:if(!se){e.next=8;break}return e.next=7,n.current.read(F);case 7:r=e.sent;case 8:return e.next=10,Object(b.g)(r,x);case 10:return a=e.sent,Y(a),U(r),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){se&&"dir"!==D&&je()}),[F]);var Oe=he,Ee=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,me(Object(h.b)({message:"Renaming file"})),e.next=4,n.current.move(F,ce,t);case 4:me(Object(h.b)({})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error moving!",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function xe(){return we.apply(this,arguments)}function we(){return(we=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=13;break}if(me(Object(h.b)({message:"Fetching download"})),n=M,M){e.next=7;break}return e.next=6,je();case 6:n=e.sent;case 7:return e.next=9,Object(b.d)(n,F,x,(function(e,t){me(Object(h.b)({message:"[".concat(Object(b.k)(e,t),"%] Downloading")}))}));case 9:t=e.sent,me(Object(h.b)({})),e.next=14;break;case 13:t=J;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(e,t){"dir"===D&&(t="".concat(t,".zip")),Object(v.saveAs)(e,t)},Ce=function(){me(Object(h.a)({name:R,CID:M,path:F,pathType:D}))},Se=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de){e.next=3;break}return ne(!0),e.abrupt("return");case 3:return e.next=5,xe();case 5:t=e.sent,ke(t,R);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(Object(h.b)({message:"Deleting ".concat("dir"===D?"folder":"file")})),e.next=3,n.current.remove(F);case 3:me(Object(h.b)({}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,(k||(k={}),l.a.createElement("div",{ref:N,style:le.paddingContainer,className:"fileItem ".concat(de?"fileItemEncrypted":null)},l.a.createElement("div",{onContextMenu:function(e){e.preventDefault(),E.contextMenu.show({event:e,id:"menu-id",props:{handleDelete:Fe,handleDownload:Se,handleShare:Ce,handleEdit:Ie}})},style:Object(r.a)(Object(r.a)({},le.outer),{},{backgroundColor:B||J||k.isDragging||k.combineTargetFor&&"dir"===D?u.d:"#FFF"})},l.a.createElement("div",{style:le.container,onClick:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!S){e.next=4;break}return S(),e.abrupt("return");case 4:if(!q){e.next=6;break}return e.abrupt("return");case 6:if("dir"!==D){e.next=10;break}a(F),e.next=20;break;case 10:if(J||!Object(b.o)(ie)){e.next=19;break}return me(Object(h.b)({message:"Fetching preview"})),e.next=14,xe();case 14:n=e.sent,me(Object(h.b)({})),$(n),e.next=20;break;case 19:$(null);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},le.flexItem),{},{maxWidth:oe?null:"25%"})},l.a.createElement(Oe,{color:u.h,size:16,style:le.icon}),q?l.a.createElement(l.a.Fragment,null,be):w?". . /":l.a.createElement("span",{ref:ae,style:le.filename},fe)),l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},le.flexItem),{},{justifyContent:"flex-end"})},"dir"!==D&&W?Object(b.m)(W.size):null),l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},le.flexItem),{},{justifyContent:"flex-end"})},"dir"!==D&&(null===W||void 0===W?void 0:W.mtime)?Object(b.h)(W.mtime.secs):null),l.a.createElement("div",{style:le.tools},te?l.a.createElement(l.a.Fragment,null,ye):l.a.createElement("div",null,l.a.createElement(p.a,{id:"Share-".concat(D),iconComponent:d.p,changeColor:u.c,tooltip:"Share",onClick:Ce}),l.a.createElement(p.a,{id:"Download-".concat(D),iconComponent:d.d,changeColor:u.c,tooltip:"Download",onClick:Se}),I?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{id:"Rename-".concat(D),iconComponent:d.e,changeColor:u.c,tooltip:"Rename",onClick:Ie}),l.a.createElement(p.a,{id:"Delete-".concat(D),iconComponent:d.q,tooltip:"Delete",onClick:Fe}))))),J?l.a.createElement("div",{style:le.preview},l.a.createElement(m.a,{blob:J,filename:R})):null))))}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),c=n(9),i=n(22),o=n(90),s={container:{padding:10,backgroundColor:"#FFF",textAlign:"center",width:"100%",paddingTop:100,fontSize:20,fontFamily:"MuseoModerno",fontWeight:"300",color:c.g,boxSizing:"border-box"},icon:{marginRight:4}};function l(e){var t=e.ipfsError,n=e.message;n||(n="Loading...");var r=!1===e.loading?null:a.a.createElement(o.FiLoader,{color:c.g,size:16,style:s.icon,className:"rotating"}),l=Object(i.r)()?"Sailplane failed to start network. Try refreshing.":"This browser does not support WebRTC, iOS users please try Safari.";return a.a.createElement("div",{style:s.container},Object(i.r)()&&!t?a.a.createElement("div",null,r,n):a.a.createElement("div",null,l))}},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n.n(r),c=n(22),i=a.a.memo((function(e){var t=e.blob,n=e.filename,r=e.size;r||(r="small");var i={container:{marginTop:10},image:{width:"small"===r?300:"100%"},audio:{userSelect:"none",outline:0}},o=Object(c.f)(n),s=window.URL.createObjectURL(t);return a.a.createElement("div",{onClick:function(e){return e.stopPropagation()},style:i.container},Object(c.p)(o)?a.a.createElement("div",null,a.a.createElement("img",{src:s,style:i.image})):null,Object(c.o)(o)?a.a.createElement("div",null,a.a.createElement("audio",{controls:!0},a.a.createElement("source",{src:s,style:i.audio}))):null)}))},216:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n.n(r),c=n(8),i=n(13),o=n(573),s=n.n(o),l=n(1),u=null;function d(e){var t=Object(l.useState)(Boolean(u)),n=Object(i.a)(t,2),r=n[0],o=n[1],d=Object(l.useState)(null),f=Object(i.a)(d,2),p=f[0],m=f[1];return Object(l.useEffect)((function(){function t(){return(t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=4;break}console.log("IPFS already started"),t.next=24;break;case 4:if(!window.ipfs||!window.ipfs.enable){t.next=11;break}return console.log("Found window.ipfs"),t.next=8,window.ipfs.enable({commands:["id"]});case 8:u=t.sent,t.next=24;break;case 11:return t.prev=11,console.time("IPFS Started"),t.next=15,s.a.create({EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/","/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/","/dns4/libp2p-rdv.vps.revolunet.com/tcp/443/wss/p2p-webrtc-star/"]}}});case 15:u=t.sent,console.timeEnd("IPFS Started"),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(11),e(t.t0),u=null,m(t.t0);case 24:window.ipfs=u,o(Boolean(u));case 26:case"end":return t.stop()}}),t,null,[[11,19]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){u&&u.stop&&(console.log("Stopping IPFS"),u.stop().catch((function(e){return console.error(e)})),u=null,o(!1))}}),[]),{ipfs:u,isIpfsReady:r,ipfsInitError:p}}},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(13),a=n(1),c=n.n(a),i=n(9),o=n(58),s=n(81);function l(e){var t=e.selected,n=e.onClick,a=e.title,o=e.iconComponent,l=Object(s.a)(),u=Object(r.a)(l,2),d=u[0],f=u[1],p=o,m={container:{backgroundColor:t?"#FFF":f?i.i:null,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",fontSize:16,cursor:"pointer",padding:8,borderRadius:4,marginBottom:8,fontFamily:"Open Sans"},title:{color:t?i.g:"#FFF",userSelect:"none",fontSize:15},icon:{marginRight:6}};return c.a.createElement("div",{style:m.container,onClick:n,ref:d},o?c.a.createElement(p,{color:t?i.h:"#FFF",size:16,style:m.icon}):null,c.a.createElement("span",{style:m.title},a))}var u=n(57),d=n(566),f={container:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:i.h,color:"#FFF",padding:"20px 10px",minWidth:200,fontFamily:"Open Sans",paddingBottom:0},logo:{display:"inline-block",fontFamily:"MuseoModerno",color:"#FFF",fontSize:24,fontWeight:400,marginBottom:10,textAlign:"center",justifyContent:"center",alignItems:"center",userSelect:"none",cursor:"pointer"},settingsBlock:{bottom:0,width:"100%"},icon:{marginRight:6},mobilePadding:{paddingBottom:6},menuIcon:{position:"absolute",top:25,left:14},logoContainer:{display:"flex",alignItems:"center",justifyContent:"center"},footer:{textAlign:"center",marginBottom:8,fontSize:13,lineHeight:"14px",fontFamily:"Open Sans"},iconGithub:{cursor:"pointer"},githubTxt:{fontSize:10,userSelect:"none"}};function p(e){var t=e.setCurrentRightPanel,n=e.currentRightPanel,s=Object(u.a)(),p=Object(a.useState)(!1),m=Object(r.a)(p,2),b=m[0],v=m[1],g=o.a;b&&(g=o.h);var y=g;return c.a.createElement("div",{style:f.container},s?c.a.createElement(y,{color:"#FFF",size:24,style:f.menuIcon,onClick:function(){v(!b)}}):null,c.a.createElement("div",null,c.a.createElement("div",{style:f.logoContainer},c.a.createElement("div",{style:f.logo,onClick:function(){document.location="".concat(window.location.origin+window.location.pathname)}},c.a.createElement(o.f,{color:"#FFF",size:18,style:f.icon}),"Sailplane")),b||!s?c.a.createElement(c.a.Fragment,null,c.a.createElement(l,{title:"Files",iconComponent:o.e,selected:"files"===n,onClick:function(){return t("files")}}),c.a.createElement(l,{title:"Drives",iconComponent:o.g,selected:"instances"===n,onClick:function(){return t("instances")}}),c.a.createElement("div",{style:f.settingsBlock},c.a.createElement(l,{title:"Settings",selected:"settings"===n,onClick:function(){return t("settings")},iconComponent:o.c}))):c.a.createElement("div",{style:f.mobilePadding})),s?null:c.a.createElement("div",{style:f.footer},c.a.createElement("a",{href:"https://github.com/cypsela/sailplane-web",target:"_blank"},c.a.createElement(d.FaGithub,{color:i.d,size:20,style:f.iconGithub})),c.a.createElement("div",{style:f.githubTxt},"Source")))}},22:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return E})),n.d(t,"i",(function(){return w})),n.d(t,"n",(function(){return C})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return F})),n.d(t,"q",(function(){return T})),n.d(t,"s",(function(){return R})),n.d(t,"m",(function(){return A})),n.d(t,"e",(function(){return N})),n.d(t,"j",(function(){return B})),n.d(t,"h",(function(){return P})),n.d(t,"a",(function(){return _})),n.d(t,"o",(function(){return M})),n.d(t,"p",(function(){return U})),n.d(t,"l",(function(){return L})),n.d(t,"k",(function(){return H})),n.d(t,"r",(function(){return W})),n.d(t,"t",(function(){return Y})),n.d(t,"c",(function(){return K}));var r=n(2),a=n.n(r),c=n(21),i=n(8),o=n(570),s=n(80),l=n.n(s),u=n(324),d=n.n(u),f=n(571),p=n.n(f),m=n(27),b=n(58),v=n(328),g=n.n(v);n(340);function y(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t,n){var r,c,i,s,l,u,d,f,p,m,b,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.content,c=t.size,i=[],s=0,l=Math.round(c/25e4),u=!0,d=!1,e.prev=6,p=Object(o.a)(r);case 8:return e.next=10,p.next();case 10:return m=e.sent,u=m.done,e.next=14,m.value;case 14:if(b=e.sent,u){e.next=23;break}v=b,n&&n(s,l),i.push(v),s++;case 20:u=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(6),d=!0,f=e.t0;case 29:if(e.prev=29,e.prev=30,u||null==p.return){e.next=34;break}return e.next=34,p.return();case 34:if(e.prev=34,!d){e.next=37;break}throw f;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.abrupt("return",new Blob(i));case 40:case"end":return e.stop()}}),e,null,[[6,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function j(e,t,n){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(a.a.mark((function e(t,n,r){var c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new p.a,o=t.split("/")[t.split("/").length-1],e.next=4,Promise.all(n.map(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="dir"===t.type,(i=t.path.split("/"))[0]=o,s=i.join("/"),!n){e.next=8;break}e.t0=void 0,e.next=11;break;case 8:return e.next=10,y(t,r);case 10:e.t0=e.sent;case 11:l=e.t0,c.file(s,l,{dir:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.next=6,c.generateAsync({type:"blob"});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(n.get(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()(t.get(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);function S(e,t,n,r){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(a.a.mark((function e(t,n,r,c){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()(r.get(t));case 2:return i=e.sent,e.abrupt("return","dir"===i[0].type?j(n,i,c):y(i[0],c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=e.split(".");return t[t.length-1]}var D=["jpg","png","gif","mp3","wav","ogg","flac","jpeg"];function T(e){return D.includes(e.toLowerCase())}function R(e){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.digest("SHA-256",new TextEncoder("utf-8").encode(t));case 2:return n=e.sent,e.abrupt("return",Array.prototype.map.call(new Uint8Array(n),(function(e){return("00"+e.toString(16)).slice(-2)})).join(""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";var a=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1,i=Math.pow(10,n);do{e/=r,++c}while(Math.round(Math.abs(e)*i)/i>=r&&c<a.length-1);return e.toFixed(n)+" "+a[c]}function N(e,t){return t.isDragging?t.isDropAnimating?Object(c.a)(Object(c.a)({},e),{},{transitionDuration:"0.001s"}):e:{}}function B(e,t,n){var r=F(n),a=m.f;return U(r)?a=m.i:M(r)?a=m.l:!function(e){return["mp4","mov","flv","mpg","mpeg","avi"].includes(e.toLowerCase())}(r)?function(e){return["zip","tar","gz","rar","7z"].includes(e.toLowerCase())}(r)&&(a=m.b):a=m.t,"dir"===e&&(a=b.d),t&&(a=m.k),a}var P=function(e){var t=g.a.unix(e);return t.isBefore(g()().subtract(1,"day"))?t.format("MM/DD/YYYY"):t.format("h:mm a")},_=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function M(e){return["mp3","wav","ogg","flac"].includes(e.toLowerCase())}function U(e){return["jpg","jpeg","png","gif"].includes(e.toLowerCase())}function L(e){var t=0,n=0;e.forEach((function(e){var r=e.path.split("/"),a=F(r[r.length-1]);M(a)&&t++,U(a)&&n++}));var r=H(t,e.length),a=H(n,e.length);return r>60?"audio":a>60?"image":"default"}function H(e,t){return Math.round(e/t*100)}var W=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||window.RTCPeerConnection};function Y(e){var t=e?e.sort((function(e,t){return e.name<t.name?-1:1})):[],n=t.filter((function(e){return"dir"===e.type})),r=t.filter((function(e){return"dir"!==e.type}));return n.concat(r)}var K=function(e){return e?e.filter((function(e){return U(F(e.name))})):null}},24:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(49);function a(e){return{type:r.b.SET_STATUS,status:e}}function c(e){return{type:r.b.SET_SHARE_DATA,shareData:e}}},240:function(e,t){},326:function(e,t,n){"use strict";(function(e){var r=n(2),a=n.n(r),c=n(8),i=n(13),o=n(1),s=n.n(o),l=(n(336),n(218)),u=n(584),d=n(57),f=n(216),p=n(575),m=n.n(p),b=n(576),v=n.n(b),g=n(67),y=n(177),h=n(217),j=n(577),O=n(587),E=n(34),x=n(62),w=n(24),k=n(144),C=n(578),S=n(22),I=n(80),F=n.n(I);n(173);t.a=Object(h.hot)(e)((function(e){var t=e.match,n=Object(d.a)(),r=Object(o.useRef)(null),p=Object(o.useRef)({}),b=Object(o.useState)(!1),h=Object(i.a)(b,2),I=h[0],D=h[1],T=Object(o.useRef)({}),R=Object(o.useState)(!1),z=Object(i.a)(R,2),A=z[0],N=z[1],B=Object(f.a)((function(){N(!0)})),P=Object(o.useState)(!1),_=Object(i.a)(P,2),M=_[0],U=_[1],L=Object(o.useState)([]),H=Object(i.a)(L,2),W=H[0],Y=H[1],K=Object(o.useState)("/r"),G=Object(i.a)(K,2),q=G[0],V=G[1],X=Object(o.useState)(null),Z=Object(i.a)(X,2),J=Z[0],$=Z[1],Q=Object(o.useState)("files"),ee=Object(i.a)(Q,2),te=ee[0],ne=ee[1],re=t.params.importInstanceAddress,ae=decodeURIComponent(re),ce=Object(E.c)(),ie=Object(E.d)((function(e){return e.main})),oe=ie.instances,se=ie.instanceIndex,le=ie.newUser,ue=oe[se],de=Object(k.a)(se),fe={container:{position:"relative",display:n?"block":"flex",flexDirection:"row",height:"100%"}};return Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=8;break}return t=r.current,e.next=4,g.a(t,ae);case 4:if(!e.sent){e.next=8;break}n=oe.find((function(e){return e.address===ae})),c=g.c(ae),n||ce(Object(x.a)(c,ae,!0));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ae]),Object(o.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M&&(t=T.current.fs.ls(q).map((function(e){var t=T.current.fs.content(e),n=e.split("/");return{path:e,name:n[n.length-1],type:t}})),Y(t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[M,q,J]),Object(o.useEffect)((function(){I&&function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!1),oe.length){e.next=3;break}return e.abrupt("return");case 3:return ce(Object(w.b)({message:"Looking for drive..."})),e.next=6,g.d(r.current,ue.address,p.current);case 6:if(n=e.sent,i=(c=function(e){return function(t,n){ce(Object(w.b)({message:"".concat(e," ").concat(Object(S.k)(t,n),"%")})),t===n&&Object(S.a)(1500).then((function(){return ce(Object(w.b)({}))}))}})("Load"),n.events.on("db.load.progress",i),o=c("Sync"),n.events.on("db.replicate.progress",o),s=function(){return $(Date.now())},n.events.on("updated",s),n.tearDown=function(){n.events.removeListener("db.load.progress",i),n.events.removeListener("db.replicate.progress",o),n.events.removeListener("updated",s)},T.current.tearDown&&T.current.tearDown(),n.running){e.next=19;break}return e.next=19,n.start();case 19:T.current=n,t&&(V("/r"),$(Date.now())),U(!0),ce(Object(w.b)({}));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(de!==se)}),[I,se,oe]),Object(o.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.b(t);case 2:n=e.sent,r=g.c(n),ce(Object(x.a)(r,n.toString(),!1)),ce(Object(x.f)(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=Object(c.a)(a.a.mark((function t(n){var c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ce(Object(w.b)({message:"Connecting"})),t.next=3,m.a.createInstance(n);case 3:return c=t.sent,t.next=6,v.a.create(c);case 6:if(i=t.sent,r.current=i,!le){t.next=11;break}return t.next=11,e(i);case 11:D(!0),ce(Object(w.b)({})),window.sailplane=i,window.all=F.a;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();B.isIpfsReady&&t(B.ipfs)}),[B.ipfs,B.isIpfsReady]),s.a.createElement("div",{style:fe.container},s.a.createElement(l.a,{setCurrentRightPanel:ne,currentRightPanel:te}),I?function(){if("files"===te){var e=0===oe.length,t=e?"Create a drive":"Looking for drive...";return M?s.a.createElement(u.a,{sharedFs:T,ipfs:B.ipfs,directoryContents:W,setCurrentDirectory:V,currentDirectory:q}):s.a.createElement(y.a,{message:t,loading:!e})}return"settings"===te?s.a.createElement(j.a,null):"instances"===te?s.a.createElement(O.a,{sailplane:r.current,ipfs:B.ipfs}):void 0}():s.a.createElement(y.a,{ipfsError:A}),s.a.createElement(C.a,null))}))}).call(this,n(221)(e))},332:function(e,t,n){"use strict";(function(e){var r=n(2),a=n.n(r),c=n(8),i=n(13),o=n(1),s=n.n(o),l=(n(336),n(218)),u=n(57),d=n(216),f=n(177),p=n(217),m=n(34),b=n(24),v=n(22),g=n(214),y=n(586),h=n(73);t.a=Object(p.hot)(e)((function(e){var t=e.match.params,n=t.cid,r=t.path,p=t.displayType,j=Object(u.a)(),O=Object(d.a)((function(e){console.error(e)})),E=Object(o.useState)(!1),x=Object(i.a)(E,2),w=x[0],k=x[1],C=Object(o.useState)(null),S=Object(i.a)(C,2),I=S[0],F=S[1],D=Object(o.useState)(null),T=Object(i.a)(D,2),R=T[0],z=T[1],A=Object(o.useState)(!1),N=Object(i.a)(A,2),B=N[0],P=N[1],_=Object(o.useState)("files"),M=Object(i.a)(_,2),U=M[0],L=M[1],H=Object(o.useState)(null),W=Object(i.a)(H,2),Y=W[0],K=W[1],G=decodeURIComponent(r),q=decodeURIComponent(n),V=Object(m.c)(),X=G.split("/"),Z=X[X.length-1],J=Object(v.q)(Object(v.f)(Z));Object(o.useEffect)((function(){J&&w&&!Y&&"default"===p&&ae()}),[J,w,Y,q,r,p]);var $=Object(h.d)(Z),Q=$.isEncrypted,ee=$.decryptedFilename,te={container:{display:j?"block":"flex",flexDirection:"row",height:"100%"}},ne=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.i)(O.ipfs,q,(function(){console.log("updateping")}));case 2:t=e.sent,F(t.slice(1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(q,O.ipfs);case 2:t=e.sent,z(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ae(){return ce.apply(this,arguments)}function ce(){return(ce=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=4;break}t=Y,e.next=9;break;case 4:return e.next=6,Object(v.d)(q,G,O.ipfs,(function(e,t){V(Object(b.b)({message:"[".concat(Object(v.k)(e,t),"%] Downloading")}))}));case 6:t=e.sent,V(Object(b.b)({})),K(t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(o.useEffect)((function(){O.isIpfsReady&&!w&&(k(!0),ne(),re())}),[O.ipfs,O.isIpfsReady,w,p,q]);var ie=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(Object(b.b)({message:"Fetching file"})),e.next=3,ae();case 3:if(n=e.sent,!Q){e.next=10;break}return V(Object(b.b)({message:"Decrypting file"})),e.next=8,Object(h.a)(n,t);case 8:n=e.sent,V(Object(b.b)({}));case 10:Object(g.saveAs)(n,ee),P(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{style:te.container},s.a.createElement(l.a,{setCurrentRightPanel:L,currentRightPanel:U}),w?s.a.createElement(y.a,{handleDownload:ie,ready:w,path:G,cid:q,files:I,displayType:p,downloadComplete:B,fileInfo:R,fileBlob:Y,ipfs:O.ipfs}):s.a.createElement(f.a,null))}))}).call(this,n(221)(e))},336:function(e,t,n){},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={ADD_INSTANCE:"ADD_INSTANCE",REMOVE_INSTANCE:"REMOVE_INSTANCE",SET_INSTANCE_INDEX:"SET_INSTANCE_INDEX",SET_ENCRYPTION_KEY:"SET_ENCRYPTION_KEY",CLEAR_ENCRYPTION_KEY:"CLEAR_ENCRYPTION_KEY",SET_NEW_USER:"SET_NEW_USER"},a={SET_STATUS:"SET_STATUS",SET_SHARE_DATA:"SET_SHARE_DATA"}},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(1);function c(){return function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=Object(a.useState)(t),c=Object(r.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){if(!e)return!1;function n(){o(t())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),i}().width<600}},577:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(212),a=n(1),c=n.n(a),i={container:{padding:10,backgroundColor:"#FFF",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",boxSizing:"border-box"}};function o(e){return Object(r.a)(e),c.a.createElement("div",{style:i.container})}},578:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(21),a=n(91),c=n(1),i=n.n(c),o=n(27),s=(n(1441),{menuItem:{marginLeft:4,fontSize:14}}),l=function(){return i.a.createElement(a.Menu,{id:"menu-id"},i.a.createElement(a.Item,{className:"MenuItem",onClick:function(e){return e.props.handleDownload()}},i.a.createElement(o.d,{size:16,style:s.icon}),i.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Download")),i.a.createElement(a.Item,{className:"MenuItem",onClick:function(e){return e.props.handleEdit()}},i.a.createElement(o.e,{size:16,style:s.icon}),i.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Rename")),i.a.createElement(a.Item,{className:"MenuItem",onClick:function(e){return e.props.handleShare()}},i.a.createElement(o.p,{size:16,style:s.icon}),i.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Share")),i.a.createElement(a.Separator,null),i.a.createElement(a.Item,{className:"MenuItem delete",onClick:function(e){return e.props.handleDelete()}},i.a.createElement(o.q,{size:16,style:s.icon}),i.a.createElement("span",{style:Object(r.a)({},s.menuItem)},"Delete")))}},584:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(21),a=n(2),c=n.n(a),i=n(8),o=n(13),s=n(83),l=n(1),u=n.n(l),d=n(585),f=n(9),p=n(568),m=n.n(p),b=n(34),v=n(24),g=n(73),y=n(22),h=n(90),j=n(57);function O(e){var t=e.handleOpenUpload,n=e.isActive,a=Object(j.a)()?"Tap to upload files":"Drag files to upload or click here",c={container:{border:"2px dashed ".concat(f.e),backgroundColor:n?f.d:null,borderRadius:4,padding:18,height:n?"100%":null,boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"},icon:{padding:"0 6px"},dragTitle:{color:n?f.h:f.e,fontSize:16,fontWeight:400,marginTop:2},iconContainer:{display:"inline-block"},outer:{paddingTop:4,height:"100%",boxSizing:"border-box"}},i=n?f.h:f.e;return u.a.createElement("div",{style:c.outer},u.a.createElement("div",{style:c.container,onClick:n?null:t},u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("div",{className:n?"jumpingDrop":"jumping",style:Object(r.a)(Object(r.a)({},c.iconContainer),{},{animationDelay:".5s"})},u.a.createElement(h.FiImage,{color:i,size:20,style:Object(r.a)({},c.icon)})),u.a.createElement("div",{className:n?"jumpingDrop":"jumping",style:Object(r.a)(Object(r.a)({},c.iconContainer),{},{animationDelay:".75s"})},u.a.createElement(h.FiFolder,{color:i,size:20,style:Object(r.a)({},c.icon)})),u.a.createElement("div",{className:n?"jumpingDrop":"jumping",style:Object(r.a)(Object(r.a)({},c.iconContainer),{},{animationDelay:"1s"})},u.a.createElement(h.FiMusic,{color:i,size:20,style:Object(r.a)({},c.icon)})),u.a.createElement("div",{className:n?"jumpingDrop":"jumping",style:Object(r.a)(Object(r.a)({},c.iconContainer),{},{animationDelay:"1.25s"})},u.a.createElement(h.FiVideo,{color:i,size:20,style:Object(r.a)({},c.icon)}))),u.a.createElement("div",{style:c.dragTitle},n?"Drop to upload":a))))}function E(e,t){var n=e.children,r=e.sharedFs,a=e.currentDirectory,o={container:{cursor:"pointer",textAlign:"center",color:f.j,fontSize:16,fontWeight:200,fontFamily:"Open Sans",outline:0,userSelect:"none",height:"100%"}},p=Object(b.c)(),h=Object(b.d)((function(e){return e.main.encryptionKey})),j=Object(l.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(t){var n,i,o,l,u,d,f,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=26;break}n=[],i=0,o=Object(s.a)(t),e.prev=4,o.s();case 6:if((l=o.n()).done){e.next=17;break}return u=l.value,i++,p(Object(v.b)({message:"[".concat(i,"/").concat(t.length,"] Encrypting ").concat(u.path)})),e.next=12,Object(g.c)(u,h.key);case 12:d=e.sent,p(Object(v.b)({})),n.push(d);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:t=n;case 26:return p(Object(v.b)({message:"Uploading"})),f=m()(t,{preserveMtime:!0}),b=t.reduce((function(e,t){return t.size+e}),0),e.prev=29,e.next=32,r.current.upload(a,f,{progress:function(e){p(Object(v.b)({message:"[".concat(Object(y.k)(e,b),"%] Uploading files")}))}});case 32:p(Object(v.b)({})),e.next=39;break;case 35:e.prev=35,e.t1=e.catch(29),p(Object(v.b)({message:"Missing write permissions.",isError:!0})),Object(y.a)(4e3).then((function(){return p(Object(v.b)({}))}));case 39:case"end":return e.stop()}}),e,null,[[4,19,22,25],[29,35]])})));return function(t){return e.apply(this,arguments)}}(),[a,h]),E=Object(d.a)({onDrop:j,noClick:!0}),x=E.getRootProps,w=E.getInputProps,k=E.isDragActive,C=E.open;return Object(l.useImperativeHandle)(t,(function(){return{openUpload:function(){C()}}})),u.a.createElement("div",Object.assign({},x(),{style:o.container,id:"dropZone"}),u.a.createElement("input",Object.assign({},w(),{id:"fileUpload"})),k?u.a.createElement(O,{isActive:!0}):u.a.createElement("div",null,n))}E=Object(l.forwardRef)(E);var x=n(59),w=n(27),k=n(58),C=n(212),S=n(81);function I(e){var t=e.name,n=e.onClick,r=Object(S.a)(),a=Object(o.a)(r,2),c=a[0],i=a[1],s={container:{backgroundColor:i?f.h:"#FFF",color:i?"#FFF":f.h,padding:"6px 10px",display:"block",minWidth:7.5*t.length}};return u.a.createElement("div",{className:"smallInstanceItem",style:s.container,ref:c,onClick:n},t)}var F=n(62);function D(e){Object(C.a)(e);var t=Object(b.d)((function(e){return e.main})),n=Object(b.c)(),r=t.instances,a=t.instanceIndex,c=r[a],i=Object(l.useState)(!1),s=Object(o.a)(i,2),d=s[0],p=s[1],m=r.filter((function(e){return e!==c})),v={container:{display:r.length>1?"flex":"none",alignItems:"center",position:"relative",marginRight:6,border:"1px solid ".concat(f.e),borderBottomWidth:d?0:1,color:f.h,padding:"3px 6px",borderRadius:"4px 4px ".concat(d?0:4,"px ").concat(d?0:4,"px"),fontSize:14},menu:{backgroundColor:"#FFF",position:"absolute",minWidth:100,top:25,left:-1,border:"1px solid ".concat(f.h),color:f.h},icon:{marginRight:4}};return u.a.createElement("span",{style:v.container,onClick:function(){m.length&&p(!d)}},u.a.createElement(w.h,{color:f.h,size:16,style:v.icon}),u.a.createElement("span",{id:"currentInstanceSelector"},c.name),d?u.a.createElement("div",{style:v.menu},m.map((function(e,t){return u.a.createElement(I,{key:t,name:e.name,onClick:function(){var t=r.findIndex((function(t){return t===e}));n(Object(F.e)(t))}})}))):null)}var T={container:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:16,marginBottom:10,color:f.h,fontFamily:"Open Sans",fontWeight:600,userSelect:"none"},icon:{marginRight:4},root:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",fontWeight:400},folderIcon:{marginLeft:4,marginRight:4},folderName:{fontWeight:400,cursor:"pointer",marginLeft:2,marginRight:2}};function R(e){var t=e.currentDirectory,n=e.setCurrentDirectory,r=t.split("/").slice(2);return u.a.createElement("div",{style:T.container},u.a.createElement("div",{onClick:function(){return n("/r")},style:T.root},u.a.createElement(k.b,{color:f.h,size:16,style:T.icon}),u.a.createElement(D,null)," /"),r.map((function(e,t){for(var a="/r",c=0;c<=t;c++)a+="/".concat(r[c]);return u.a.createElement("span",{key:e},u.a.createElement("span",{style:T.folderName,className:"folderName",onClick:function(){n(a)}},e),"/")})))}var z=n(82),A={tools:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontFamily:"Open Sans"},rightTools:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}};function N(e){var t=e.currentDirectory,n=e.sharedFs,r=e.setCurrentDirectory,a=e.handleOpenUpload,s=Object(l.useState)(!1),d=Object(o.a)(s,2),p=d[0],m=d[1],g=Object(l.useState)(!1),y=Object(o.a)(g,2),h=y[0],j=y[1],O=Object(b.c)(),E=Object(b.d)((function(e){return e.main.encryptionKey})),k=t.split("/"),C=k[k.length-1],S=function(){var e=Object(i.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.current.mkdir(t,r);case 3:m(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Mkdir error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),I=Object(z.a)(p,(function(e){return S(e)}),(function(){return m(!1)}),"",{placeholder:"folder name"}),D=Object(z.a)(h,(function(e){return function(e){O(Object(F.d)(e,"string")),j(!1)}(e)}),(function(){return j(!1)}),"",{placeholder:"secure password",isPassword:!0});return u.a.createElement("div",null,u.a.createElement("div",{style:A.tools},u.a.createElement("div",{style:A.leftTools},u.a.createElement(R,{currentDirectory:t,setCurrentDirectory:r})),u.a.createElement("div",{style:A.rightTools},p||h?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a,{id:"togglePassword",iconComponent:E?w.k:w.r,size:18,defaultColor:E?f.b:null,changeColor:E?f.a:f.b,onClick:function(){E?O(Object(F.b)()):j(!0)}}),"/r"!==t?u.a.createElement(x.a,{id:"folderShare",iconComponent:w.p,size:18,changeColor:f.g,onClick:function(){O(Object(v.a)({name:C,path:t,pathType:"dir"}))}}):null,u.a.createElement(x.a,{iconComponent:w.s,size:18,changeColor:f.g,onClick:function(){a()}}),u.a.createElement(x.a,{id:"addFolder",iconComponent:w.g,size:18,changeColor:f.g,onClick:function(){return m(!0)}})),p?u.a.createElement(u.a.Fragment,null,I):null,h?u.a.createElement(u.a.Fragment,null,D):null)))}var B=n(178),P=n(143);function _(e){var t=e.onSelect,n=e.items,a=e.currentIndex,c={container:{display:"flex",alignItems:"center"},item:{display:"flex",alignItems:"center",padding:6,borderRadius:4,cursor:"pointer"}};return u.a.createElement("div",{style:c.container},n.map((function(e,i){var o=e.icon;return u.a.createElement("div",{id:"shareType-".concat(n[i].name),style:Object(r.a)(Object(r.a)({},c.item),{},{backgroundColor:i===a?f.h:null}),onClick:function(){t(i)}},u.a.createElement(o,{color:i===a?"#FFF":f.h,size:16,style:c.icon}))})))}var M={container:{position:"absolute",backgroundColor:"#FFF",border:"1px solid ".concat(f.h),borderRadius:4,top:150,left:"50%",transform:"translateX(-50%)",width:"80%",fontFamily:"Open Sans",zIndex:1e4,boxShadow:"0 0px 14px hsla(0, 0%, 0%, 0.2)"},header:{backgroundColor:f.h,color:"#FFF",padding:8,fontSize:14,display:"flex",justifyContent:"space-between",alignItems:"center"},body:{padding:14},xIcon:{cursor:"pointer"},background:{position:"fixed",width:"100%",height:"100%",top:0,left:0,backgroundColor:"#00000033"}};function U(e){var t=e.isVisible,n=e.body,r=e.onClose,a=e.title;return t?u.a.createElement("div",{style:M.outer},u.a.createElement("div",{style:M.background,onClick:r}),u.a.createElement("div",{style:M.container},u.a.createElement("div",{style:M.header},u.a.createElement("div",null,a),u.a.createElement(k.h,{color:"#FFF",size:16,style:M.xIcon,onClick:r})),u.a.createElement("div",{style:M.body},n))):null}var L={filename:{color:f.h},input:{border:"1px solid ".concat(f.e),borderRadius:4,color:f.c,fontSize:14,fontWeight:200,padding:4,display:"inline-flex",flexGrow:2,marginTop:8},flex:{display:"flex"},link:{marginTop:8,color:"".concat(f.h," !important"),fontSize:14},loading:{display:"flex",alignItems:"center",color:f.h,marginTop:10,fontSize:14},icon:{marginRight:4},nameHolder:{display:"flex",justifyContent:"space-between",alignItems:"center"}},H=[{name:"default",icon:w.f},{name:"image",icon:w.i},{name:"audio",icon:w.l}];function W(e){var t=e.sharedFs,n=Object(b.c)(),r=Object(b.d)((function(e){return e.tempData.shareData})),a=Object(l.useRef)(null),s=r.CID,d=r.path,p=r.name,m=r.pathType,g=Object(l.useState)(0),h=Object(o.a)(g,2),j=h[0],O=h[1],E=Object(l.useState)(s),x=Object(o.a)(E,2),k=x[0],C=x[1];if(Object(l.useEffect)((function(){p?C(s):(C(null),O(0))}),[p,s]),Object(l.useEffect)((function(){var e=function(){var e=Object(i.a)(c.a.mark((function e(){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current.read(d);case 2:n=e.sent,C(n),"dir"===m&&(r=t.current.fs.ls(d).map((function(e){var n=t.current.fs.content(e),r=d.split("/");return{path:e,name:r[r.length-1],type:n}})),a=Object(y.l)(r),i=H.findIndex((function(e){return e.name===a})),O(i));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!k&&d?e():a.current&&a.current.select()}),[k,d]),!d)return null;var S="".concat(window.location.origin+window.location.pathname,"#/download/").concat(encodeURIComponent(k),"/").concat(encodeURIComponent(d),"/").concat(H[j].name);return u.a.createElement(U,{title:"Share options",onClose:function(){return n(Object(v.a)({}))},isVisible:d,body:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:L.nameHolder},u.a.createElement("div",{style:L.filename},p),u.a.createElement("div",null,"dir"===m?u.a.createElement(_,{currentIndex:j,items:H,onSelect:function(e){return O(e)}}):null)),k?u.a.createElement("div",null,u.a.createElement("div",{style:L.flex},u.a.createElement("input",{ref:a,style:L.input,type:"text",value:S,readOnly:!0})),u.a.createElement("div",{style:L.link},u.a.createElement("a",{href:S,className:"link",target:"_blank"},"Open link"))):u.a.createElement("div",{style:L.loading},u.a.createElement(w.j,{color:f.h,size:16,style:L.icon,className:"rotating"}),"Loading share link..."))})}var Y=n(145);function K(e){var t=e.data,n=e.sharedFs,r=e.setCurrentDirectory,a=e.ipfs,c=e.fileIndex,i=e.isParent,o=e.onIconClicked;return u.a.createElement(B.b,{draggableId:t.path,index:c},(function(e,s){var l=e.innerRef,d=e.draggableProps,f=e.dragHandleProps;return u.a.createElement("div",Object.assign({ref:l},d,f,{style:Object(y.e)(d.style,s)}),u.a.createElement(Y.a,{sharedFs:n,setCurrentDirectory:r,isParent:i,fileIndex:c,ipfs:a,data:t,snapshot:s,onIconClicked:o}))}))}var G=n(215),q={container:{position:"relative",padding:10,backgroundColor:"#FFF",width:"100%",display:"flex",flexDirection:"column",fontFamily:"Open Sans",boxSizing:"border-box",height:"100%"},fileHeader:{marginTop:10,display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid ".concat(f.d),paddingBottom:10,marginBottom:4,userSelect:"none"},fileHeaderItem:{width:"100%",color:f.f,fontSize:12,letterSpacing:1.08,textAlign:"left"},files:{backgroundColor:"#FFF"},dropContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",flexGrow:2,opacity:1,height:"100%",overflowY:"auto"}};function V(e){var t=e.sharedFs,n=e.ipfs,a=e.directoryContents,s=e.setCurrentDirectory,d=e.currentDirectory,f=Object(j.a)(),p=Object(l.useRef)(null),m=Object(y.t)(a),g=d.split("/"),h=g.slice(0,g.length-1).join("/"),x=Object(l.useState)(!1),w=Object(o.a)(x,2),k=w[0],C=w[1],S=Object(l.useState)(0),I=Object(o.a)(S,2),F=I[0],D=I[1],T=Object(l.useState)(new Array(1e3)),R=Object(o.a)(T,2),z=R[0],A=R[1],_=Object(y.c)(m),M=Object(b.c)();return Object(l.useEffect)((function(){A(new Array(1e3))}),[d]),Object(l.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z[0]&&k){e.next=2;break}return e.abrupt("return");case 2:return r=_.map(function(){var e=Object(i.a)(c.a.mark((function e(r){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current.read(r.path);case 2:return a=e.sent,e.next=5,Object(y.d)(a,r.path,n,(function(e,t){M(Object(v.b)({message:"[".concat(Object(y.k)(e,t),"%] Loading previews")}))}));case 5:return i=e.sent,M(Object(v.b)({})),e.abrupt("return",window.URL.createObjectURL(i));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(r);case 5:a=e.sent,A(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[_.length,k,d]),u.a.createElement("div",{style:q.container},k&&z[F]?u.a.createElement(G.a,{mainSrc:z[F],nextSrc:z[F+1],prevSrc:z[F-1],onMoveNextRequest:function(){return D(F+1)},onMovePrevRequest:function(){return D(F-1)},onCloseRequest:function(){return C(!1)}}):null,u.a.createElement(N,{currentDirectory:d,sharedFs:t,setCurrentDirectory:s,handleOpenUpload:function(){p.current.openUpload()}}),u.a.createElement("div",{style:q.fileHeader},u.a.createElement("div",{style:Object(r.a)(Object(r.a)({},q.fileHeaderItem),{},{paddingLeft:12})},"Name"),f?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:Object(r.a)(Object(r.a)({},q.fileHeaderItem),{},{textAlign:"right"})},"Size"),u.a.createElement("div",{style:Object(r.a)(Object(r.a)({},q.fileHeaderItem),{},{textAlign:"right"})},"Modified")),u.a.createElement("div",{style:q.fileHeaderItem})),u.a.createElement("div",{style:q.dropContainer},u.a.createElement(E,{sharedFs:t,currentDirectory:d,ref:p},u.a.createElement(B.a,{onDragEnd:function(){var e=Object(i.a)(c.a.mark((function e(n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.combine,a=n.draggableId,!r){e.next=14;break}if(i=t.current.fs.pathName(a),"dir"===t.current.fs.content(r.draggableId)){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,t.current.move(n.draggableId,n.combine.draggableId,i);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),M(Object(v.b)({message:"failed to move ".concat(n.draggableId),isError:!0})),Object(y.a)(2e3).then((function(){return M(Object(v.b)({}))}));case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},u.a.createElement(B.c,{droppableId:"droppable-1",type:"fileblock",isCombineEnabled:!0},(function(e,r){return u.a.createElement("div",{style:q.filesContainer},"/r"!==d?u.a.createElement(K,{fileIndex:0,isParent:!0,key:h,data:{path:h,type:"dir"},sharedFs:t,ipfs:n,setCurrentDirectory:s}):null,u.a.createElement("div",Object.assign({ref:e.innerRef,style:{}},e.droppableProps),a.length?u.a.createElement("div",{style:q.files},m.map((function(e,r){return u.a.createElement(K,{fileIndex:r+1,key:e.path,data:e,sharedFs:t,ipfs:n,setCurrentDirectory:s,onIconClicked:Object(y.p)(Object(y.f)(e.name))?function(){var t=_.findIndex((function(t){return t.name===e.name}));D(t),C(!0)}:null})}))):u.a.createElement(O,{handleOpenUpload:function(){p.current.openUpload()}}),u.a.createElement("span",{style:{display:"none"}},e.placeholder)))}))))),u.a.createElement(P.a,null),u.a.createElement(W,{sharedFs:t}))}},586:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(21),a=n(2),c=n.n(a),i=n(8),o=n(13),s=n(1),l=n.n(s),u=n(143),d=n(9),f=n(73),p=n(27),m=n(82),b=n(22);function v(e){var t=e.file,n=e.onLoadURL,r=e.fileIndex,a=e.onClick,u=Object(s.useState)(null),f=Object(o.a)(u,2),p=f[0],m=f[1],v=Object(s.useState)(0),g=Object(o.a)(v,2),y=g[0],h=g[1],j={container:{padding:8,color:d.h,fontSize:14},img:{padding:8,background:"center/cover url(".concat(p,")"),minWidth:140,minHeight:200,justifyContent:"center",alignItems:"center",display:"flex",cursor:"pointer"}};function O(){return(O=Object(i.a)(c.a.mark((function e(){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.b)(t,(function(e,t){h(Object(b.k)(e,t))}));case 3:a=e.sent,i=window.URL.createObjectURL(a),m(i),n(i,r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("err filetoblob",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){O.apply(this,arguments)}()}),[]),l.a.createElement("div",{style:j.container},l.a.createElement("div",{className:"imageGalleryBlock",style:j.img,onClick:function(){return a()}},p?null:l.a.createElement("div",null,y,"%")))}var g=n(215);n(564);function y(e){var t=e.files,n=Object(s.useState)(!1),r=Object(o.a)(n,2),a=r[0],c=r[1],i=Object(s.useState)(0),u=Object(o.a)(i,2),d=u[0],f=u[1],p=Object(s.useState)(new Array(1e3)),m=Object(o.a)(p,2),y=m[0],h=m[1],j=Object(b.c)(t);return l.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center",flexWrap:"wrap"}},a&&y[d]?l.a.createElement(g.a,{mainSrc:y[d],nextSrc:y[d+1],prevSrc:y[d-1],onMoveNextRequest:function(){return f(d+1)},onMovePrevRequest:function(){return f(d-1)},onCloseRequest:function(){return c(!1)}}):null,j?j.map((function(e,t){return l.a.createElement(v,{key:t,file:e,fileIndex:t,onClick:function(){y[t]&&(f(t),c(!0))},onLoadURL:function(e){var n=y;n[t]=e,h(n)}})})):null)}var h=n(213),j=n(145),O=n(57);function E(e){var t=e.currentAudio,n=e.setPlaying,r={outer:{width:"100%",backgroundColor:d.d,padding:18,borderRadius:4,boxShadow:"rgb(70, 145, 191) 0px 0px 4px",marginTop:10,marginBottom:8},container:{width:"100%",color:"#FFF",backgroundColor:d.e,borderRadius:4,display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:10,height:50,boxShadow:"1px 2px 3px #4691bfad inset"},name:{fontFamily:"MuseoModerno",lineHeight:"16px",fontWeight:"500",fontStyle:"italic",textAlign:"center"},audio:{width:"100%",userSelect:"none",outline:0,boxShadow:"0px 0px 2px ".concat(d.g),borderRadius:30}},a=Object(s.useRef)(null),c={filename:"Not Playing"};return t&&(c=t),l.a.createElement("div",{style:r.outer},l.a.createElement("div",{style:r.container},l.a.createElement("div",{style:r.name},b.n?l.a.createElement("marquee",{scrollamount:4,behavior:"scroll"},c.filename?c.filename:"Not playing"):l.a.createElement("div",null,c.filename?c.filename:"Not playing"))),l.a.createElement("audio",{ref:a,style:r.audio,onPlay:function(){n(!0)},onPause:function(){n(!1)},onEnded:function(){n(!1)},autoPlay:!0,src:c.url,controls:!0}))}var x=n(144),w=n(92),k=n(34),C=n(24);function S(e){var t=e.files,n=e.ipfs,a={container:{display:"flex",width:"100%",justifyContent:"center",flexWrap:"wrap"},fileContainer:{width:"100%"},fileHeader:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid ".concat(d.d),paddingBottom:10,marginBottom:4},fileHeaderItem:{width:"100%",color:d.f,fontSize:12,letterSpacing:1.08,textAlign:"left"}},u=Object(k.c)(),f=Object(s.useState)(-1),m=Object(o.a)(f,2),v=m[0],g=m[1],y=Object(s.useState)(new Array(1e3)),h=Object(o.a)(y,2),S=h[0],I=h[1],F=Object(s.useState)(!1),D=Object(o.a)(F,2),T=D[0],R=D[1],z=Object(x.a)(v),A=t?t.filter((function(e){var t=Object(b.f)(e.name);return Object(b.o)(t)})):null,N=Object(O.a)(),B=Object(b.t)(A);function P(e){return _.apply(this,arguments)}function _(){return(_=Object(i.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.b)(t,(function(e,t){u(Object(C.b)({message:"[".concat(Object(b.k)(e,t),"%] Downloading audio")}))}));case 2:return n=e.sent,u(Object(C.b)({})),r=window.URL.createObjectURL(n),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z!==v){e.next=2;break}return e.abrupt("return");case 2:if(S[v]){e.next=11;break}if(t=B[v]){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,P(t);case 8:n=e.sent,r=Object(w.a)(S,(function(e){e[v]=n})),I(r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[v,S,B]);var M=B[v],U=S[v],L={filename:null===M||void 0===M?void 0:M.name,url:U};return l.a.createElement("div",{style:a.container},l.a.createElement(E,{currentAudio:L,setPlaying:R}),B?l.a.createElement("div",{style:a.fileContainer},l.a.createElement("div",{style:a.fileHeader},l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},a.fileHeaderItem),{},{paddingLeft:12})},"Name"),N?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},a.fileHeaderItem),{},{textAlign:"right"})},"Size"),l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},a.fileHeaderItem),{},{textAlign:"right"})},"Modified")),l.a.createElement("div",{style:a.fileHeaderItem})),B.map((function(e,t){return l.a.createElement(j.a,{forceIcon:!0===T&&v===t?p.m:p.n,data:e,setCurrentDirectory:function(){},readOnly:!0,ipfs:n,onIconClicked:function(){t!==v&&g(t)}})}))):null)}var I={container:{position:"relative",padding:10,paddingTop:20,backgroundColor:"#FFF",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",boxSizing:"border-box"},filename:{color:d.h,fontSize:20,textAlign:"center",borderBottom:"1px solid ".concat(d.d),paddingBottom:6,marginBottom:6},fileSize:{fontSize:14,textAlign:"center",color:d.h},downloadButton:{display:"inline-block",backgroundColor:d.h,color:"#FFF",borderRadius:4,padding:12,marginTop:10,cursor:"pointer"},icon:{marginRight:4},passwordContainer:{marginTop:10},downloadButtonHolder:{textAlign:"center",marginBottom:8},previewBlock:{display:"flex",justifyContent:"center",marginTop:10},fileHeader:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid ".concat(d.d),paddingBottom:10,marginBottom:4},fileHeaderItem:{width:"100%",color:d.f,fontSize:12,letterSpacing:1.08,textAlign:"left"}};function F(e){var t=e.ready,n=e.path,a=e.handleDownload,v=e.downloadComplete,g=e.displayType,E=e.files,x=e.fileInfo,w=e.fileBlob,k=e.ipfs,C=n.split("/"),F=C[C.length-1],D=Object(s.useState)(!1),T=Object(o.a)(D,2),R=T[0],z=T[1],A=Object(s.useState)(!1),N=Object(o.a)(A,2),B=N[0],P=N[1],_=Object(O.a)(),M=Object(f.d)(F),U=M.isEncrypted,L=M.decryptedFilename,H=M.passHash,W=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(t,H);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:e.sent||(P(!1),a(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=Object(m.a)(B,(function(e){return Y(e)}),(function(){return P(!1)}),"",{placeholder:"password",isPassword:!0,isError:W,confirmTitle:"Unlock"}),G=Object(b.t)(E);return l.a.createElement("div",{style:I.container},l.a.createElement("div",null,t?l.a.createElement("div",null,l.a.createElement("div",{style:I.filename},U?l.a.createElement(p.k,{color:d.h,size:16,style:I.icon}):null,L),l.a.createElement("div",{style:I.downloadButtonHolder},B?l.a.createElement("div",{style:I.passwordContainer},K):l.a.createElement("div",{style:I.downloadButton,onClick:function(){U?P(!0):(z(!0),a())}},R&&!v?"Fetching download...":"Download now")),(null===x||void 0===x?void 0:x.size)?l.a.createElement("div",{style:I.fileSize},Object(b.m)(x.size)):null,w?l.a.createElement("div",{style:I.previewBlock},l.a.createElement("div",{style:I.preview},l.a.createElement(h.a,{blob:w,filename:F,size:"large"}))):null,"default"!==g?l.a.createElement("div",null,"image"===g?l.a.createElement(y,{files:E}):null,"audio"===g?l.a.createElement(S,{files:E,ipfs:k}):null):null,G.length&&"audio"!==g?l.a.createElement("div",{style:I.fileContainer},l.a.createElement("div",{style:I.fileHeader},l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},I.fileHeaderItem),{},{paddingLeft:12})},"Name"),_?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},I.fileHeaderItem),{},{textAlign:"right"})},"Size"),l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},I.fileHeaderItem),{},{textAlign:"right"})},"Modified")),l.a.createElement("div",{style:I.fileHeaderItem})),G.map((function(e){return l.a.createElement(j.a,{key:e.name,data:e,setCurrentDirectory:function(){},readOnly:!0,ipfs:k})}))):null):l.a.createElement("div",null)),l.a.createElement(u.a,null))}},587:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(2),a=n.n(r),c=n(8),i=n(13),o=n(1),s=n.n(o),l=n(9),u=n(59),d=n(27),f=n(90),p=n(34),m=n(24),b=n(81),v=n(67),g=s.a.memo((function(e){var t=e.data,n=e.selected,r=e.onClick,o=e.onDelete,g=(e.instanceIndex,t.address),y=t.isImported,h=Object(p.c)(),j=Object(b.a)(),O=Object(i.a)(j,2),E=O[0],x=O[1],w=n?l.e:"#FFF";x&&!n&&(w=l.d);var k=n?"#FFF":l.h,C={paddingContainer:{paddingTop:3,paddingBottom:3},outer:{backgroundColor:w,color:k,padding:6,paddingTop:6,fontFamily:"Open Sans",cursor:"pointer",borderRadius:4},container:{display:"flex",justifyContent:"space-between",alignItems:"center"},address:{fontSize:14,overflow:"hidden",width:"40%",textOverflow:"ellipsis",whiteSpace:"nowrap"},tools:{display:"flex",justifyContent:"flex-end"},toolItem:{},name:{fontSize:16,lineHeight:"19px",display:"flex",alignItems:"center"},icon:{marginRight:4},importedTxt:{marginLeft:6,fontSize:13}},S="".concat(window.location.origin+window.location.pathname,"#/importInstance/").concat(encodeURIComponent(g));return s.a.createElement("div",{style:C.paddingContainer,ref:E},s.a.createElement("div",{className:"drive",style:C.outer,onClick:function(e){e.stopPropagation(),r()}},s.a.createElement("div",{style:C.container},s.a.createElement("div",{style:C.name},s.a.createElement(f.FiHardDrive,{className:"shareIcon",color:k,size:15,style:C.icon}),Object(v.c)(g),y?s.a.createElement("span",{style:C.importedTxt},"[imported]"):null),s.a.createElement("div",{style:C.tools},s.a.createElement("div",{style:C.toolItem},s.a.createElement(u.a,{className:"instanceURLCopy",defaultColor:k,iconComponent:d.p,size:15,changeColor:l.c,onClick:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(S);case 2:h(Object(m.b)({message:"Drive URL copied to clipboard",isInfo:!0})),setTimeout((function(){return h(Object(m.b)({}))}),1500);case 4:case"end":return e.stop()}}),e)})))})),s.a.createElement("div",{style:C.toolItem},s.a.createElement(u.a,{className:"instanceAddressCopy",defaultColor:k,iconComponent:d.c,size:15,changeColor:l.c,onClick:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(g);case 2:h(Object(m.b)({message:"Drive address copied to clipboard",isInfo:!0})),setTimeout((function(){return h(Object(m.b)({}))}),1500);case 4:case"end":return e.stop()}}),e)})))})),s.a.createElement("div",{style:C.toolItem},s.a.createElement(u.a,{className:"instanceDelete",defaultColor:k,iconComponent:d.q,size:15,changeColor:l.a,onClick:function(){return o()}}))))))})),y=n(58),h=n(82),j=n(62),O=n(143),E=n(144),x=n(22),w={container:{position:"relative",padding:10,backgroundColor:"#FFF",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",fontFamily:"Open Sans",boxSizing:"border-box"},title:{color:l.h,fontSize:16,fontWeight:400,marginBottom:10,display:"flex",alignItems:"center",userSelect:"none"},header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",marginTop:10,borderBottom:"1px solid ".concat(l.d),marginBottom:6},icon:{cursor:"pointer",marginRight:4},tools:{display:"flex",justifyContent:"flex-end",alignItems:"center",color:l.g,fontSize:12},toolTitle:{marginRight:6,userSelect:"none"},instances:{}};function k(e){var t=e.sailplane,n=Object(o.useState)(!1),r=Object(i.a)(n,2),u=r[0],f=r[1],b=Object(o.useState)(!1),k=Object(i.a)(b,2),C=k[0],S=k[1],I=Object(p.c)(),F=Object(p.d)((function(e){return e.main})),D=F.instances,T=F.instanceIndex,R=Object(E.a)(D.length);Object(o.useEffect)((function(){R&&R<D.length&&I(Object(j.e)(D.length-1))}),[D.length,R]);var z=function(){var e=Object(c.a)(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.b(t);case 2:n=e.sent,r=v.c(n),I(Object(j.a)(r,n.toString(),!1)),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){I(Object(m.b)({message:"Invalid address",isError:!0})),Object(x.a)(5500).then((function(){return I(Object(m.b)({}))}))},e.next=3,v.a(t,n);case 3:if(!e.sent){e.next=13;break}if(c=v.c(n),!D.map((function(e){return e.address})).includes(n)){e.next=9;break}return I(Object(m.b)({message:"Drive [".concat(c,"] already exists"),isError:!0})),Object(x.a)(5500).then((function(){return I(Object(m.b)({}))})),e.abrupt("return");case 9:I(Object(j.a)(c,n,!0)),S(!1),e.next=14;break;case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(h.a)(C,(function(e){return A(e)}),(function(){return S(!1)}),"",{placeholder:"drive address"});return s.a.createElement("div",{style:w.container},s.a.createElement("div",{style:w.header},s.a.createElement("div",{style:w.title},s.a.createElement(y.g,{color:l.e,size:16,style:w.icon}),"Drives"),s.a.createElement("div",{style:w.tools},C||u?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:w.tools,className:"addInstance",onClick:function(){return S(!0)}},s.a.createElement(d.s,{color:l.h,size:16,style:w.icon}),s.a.createElement("span",{style:w.toolTitle},"Import drive")),s.a.createElement("div",{style:w.tools,className:"addInstance",onClick:function(){return z()}},s.a.createElement(d.o,{color:l.h,size:16,style:w.icon}),s.a.createElement("span",{style:w.toolTitle},"Create drive"))),C?N:null)),s.a.createElement("div",{style:w.instances},D.map((function(e,t){return s.a.createElement(g,{instanceIndex:t,key:e.address.toString(),data:e,selected:e===D[T],onClick:function(){I(Object(j.e)(t))},onDelete:function(){I(Object(j.c)(t))}})}))),s.a.createElement(O.a,null))}},588:function(e,t,n){e.exports=n(1447)},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(1),c=n.n(a),i=n(9),o=n(81),s=n(329);function l(e){var t=e.iconComponent,n=e.onClick,a=e.size,l=e.changeColor,u=e.tooltip,d=e.title,f=e.defaultColor,p=e.id,m=e.className,b=Object(o.a)(),v=Object(r.a)(b,2),g=v[0],y=v[1],h=Object(s.a)(),j=Object(r.a)(h,2),O=j[0],E=j[1],x=Object(s.a)(),w=Object(r.a)(x,2),k=w[0],C=w[1],S=t,I=C.width?C.width:0;f||(f=i.e),l||(l=i.a);var F={container:{position:"relative",display:"inline-block",cursor:"pointer",padding:4,fontSize:14},popover:{position:"fixed",top:E.y-32,left:E.x-(I/2-8),backgroundColor:i.e,color:"#FFF",padding:"4px 6px",borderRadius:2,fontSize:14,fontWeight:400,zIndex:1e3,pointerEvents:"none"},title:{textDecoration:y?"underline":"none",fontSize:13,color:i.h}};return c.a.createElement("div",{id:p,className:m,style:F.container,ref:g,onClick:function(e){e.stopPropagation(),n()}},c.a.createElement("div",{ref:O}),t?c.a.createElement(S,{color:y?l:f,size:a||16,style:F.icon}):null,d?c.a.createElement("span",{style:F.title},d):null,y&&u?c.a.createElement("div",{style:F.popover,ref:k},u):null)}},593:function(e,t,n){},604:function(e,t){},606:function(e,t){},616:function(e,t){},618:function(e,t){},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return l}));var r=n(49);function a(e,t,n){return{type:r.a.ADD_INSTANCE,name:e,address:t,isImported:n}}function c(e,t){return{type:r.a.SET_ENCRYPTION_KEY,key:e,keyType:t}}function i(){return{type:r.a.CLEAR_ENCRYPTION_KEY}}function o(e){return{type:r.a.SET_INSTANCE_INDEX,index:e}}function s(e){return{type:r.a.REMOVE_INSTANCE,index:e}}function l(e){return{type:r.a.SET_NEW_USER,bool:e}}},655:function(e,t){},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return w}));var r=n(2),a=n.n(r),c=n(21),i=n(179),o=n(8),s=n(56),l=n(173),u=n.n(l),d=u.a.parse,f=n(340);function p(e,t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.a.isValid(n)){e.next=14;break}return e.next=3,h(t,n);case 3:if("fsstore"===e.sent.type){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,O(t,n);case 8:if("orbitdb"===e.sent.type){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(){return{meta:{iv:Object(i.a)(Object(s.randomBytes)(16))},accessController:{type:"orbitdb"}}};function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.determineAddress(t.name||"sailplane-web",Object(c.a)(Object(c.a)({},b()),t))}function g(e){var t=(new TextEncoder).encode(d(e).root);return f.entropyToMnemonic(t.slice(-32)).split(" ").slice(-3).join("-")}var y=function(e){return e._orbitdb._ipfs};function h(e,t){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t).dag.get(d(n).root);case 2:return r=e.sent,c=r.value,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(a.a.mark((function e(t,n){var r,c,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,d(n));case 2:return r=e.sent,c=r.accessController,e.next=6,y(t).dag.get(c);case 6:return i=e.sent,o=i.value,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x={autoStart:!1};function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=t.toString(),e.mounted[t]||n[t]||(n[t]=e.mount(t,Object(c.a)(Object(c.a)({},x),r)).finally((function(){return delete n[t]})))}},720:function(e,t){},721:function(e,t){},73:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(2),a=n.n(r),c=n(8),i=n(22);function o(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.readAsArrayBuffer(e)}))}var s=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s,l,u,d,f,p,m,b,v,g,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t).catch((function(e){console.error(e)}));case 2:return r=e.sent,r=new Uint8Array(r),c=new TextEncoder("utf-8").encode(n),s=window.crypto.getRandomValues(new Uint8Array(8)),e.next=8,window.crypto.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveBits"]).catch((function(e){console.error(e)}));case 8:return l=e.sent,console.log("passphrasekey imported"),e.next=12,window.crypto.subtle.deriveBits({name:"PBKDF2",salt:s,iterations:1e4,hash:"SHA-256"},l,384).catch((function(e){console.error(e)}));case 12:return u=e.sent,console.log("pbkdf2bytes derived"),u=new Uint8Array(u),d=u.slice(0,32),f=u.slice(32),e.next=19,window.crypto.subtle.importKey("raw",d,{name:"AES-CBC",length:256},!1,["encrypt"]).catch((function(e){console.error(e)}));case 19:return p=e.sent,console.log("key imported"),e.next=23,window.crypto.subtle.encrypt({name:"AES-CBC",iv:f},p,r).catch((function(e){console.error(e)}));case 23:if(m=e.sent){e.next=27;break}return console.error("Fuck"),e.abrupt("return");case 27:return console.log("plaintext encrypted"),m=new Uint8Array(m),(b=new Uint8Array(m.length+16)).set(new TextEncoder("utf-8").encode("Salted__")),b.set(s,8),b.set(m,16),(v=new Blob([b],{type:t.type})).name=t.name,e.next=37,Object(i.s)(n);case 37:return g=e.sent,y=g.substr(0,10),v.path="".concat(t.path,".encrypted-sailplane_").concat(y),v.lastModified=t.lastModified,v.lastModifiedDate=t.lastModifiedDate,e.abrupt("return",v);case 43:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,i,s,l,u,d,f,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t).catch((function(e){console.error(e)}));case 2:return r=e.sent,r=new Uint8Array(r),c=new TextEncoder("utf-8").encode(n),i=r.slice(8,16),e.next=8,window.crypto.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveBits"]).catch((function(e){console.error(e)}));case 8:return s=e.sent,console.log("passphrasekey imported"),e.next=12,window.crypto.subtle.deriveBits({name:"PBKDF2",salt:i,iterations:1e4,hash:"SHA-256"},s,384).catch((function(e){console.error(e)}));case 12:return l=e.sent,console.log("pbkdf2bytes derived"),l=new Uint8Array(l),u=l.slice(0,32),d=l.slice(32),r=r.slice(16),e.next=20,window.crypto.subtle.importKey("raw",u,{name:"AES-CBC",length:256},!1,["decrypt"]).catch((function(e){console.error(e)}));case 20:return f=e.sent,console.log("key imported"),e.next=24,window.crypto.subtle.decrypt({name:"AES-CBC",iv:d},f,r).catch((function(e){console.error(e)}));case 24:if(p=e.sent){e.next=27;break}return e.abrupt("return",!1);case 27:return console.log("ciphertext decrypted"),p=new Uint8Array(p),(m=new Blob([p],{type:"application/download"})).name=t.name,m.path=t.path,m.lastModified=t.lastModified,m.lastModifiedDate=t.lastModifiedDate,e.abrupt("return",m);case 35:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(e){var t=Object(i.f)(e);return/encrypted-sailplane/.test(t)?{isEncrypted:!0,passHash:t.split("_")[1],decryptedFilename:e.substring(0,e.length-t.length-1)}:{isEncrypted:!1,decryptedFilename:e}},d=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.s)(t);case 2:if(r=e.sent,r.substr(0,10)===n){e.next=6;break}return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(1);function c(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useRef)(null),o=function(){return c(!0)},s=function(){return c(!1)};return Object(a.useEffect)((function(){var e=i.current;if(e)return e.addEventListener("mouseover",o),e.addEventListener("mouseout",s),function(){e.removeEventListener("mouseover",o),e.removeEventListener("mouseout",s)}}),[i.current]),[i,n]}},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n.n(r),c=n(8),i=n(13),o=n(1),s=n.n(o),l=n(59),u=n(9);function d(e,t,n,r,d){var f=d.placeholder,p=d.isPassword,m=d.isError,b=d.confirmTitle,v=Object(o.useState)(r),g=Object(i.a)(v,2),y=g[0],h=g[1],j=Object(o.useState)(!1),O=Object(i.a)(j,2),E=O[0],x=O[1],w=Object(o.useRef)(null),k=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(y);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){m&&k()}),[y]);var C={input:{border:"1px solid ".concat(E?u.a:m?u.b:u.e),borderRadius:4,color:u.c,fontSize:14,fontWeight:200,padding:4,marginRight:4,display:"inline-flex",flexGrow:2},acceptButton:{backgroundColor:u.e,color:"#FFF",fontSize:12,padding:"3px 5px",borderRadius:2,cursor:"pointer",zIndex:2}};return Object(o.useEffect)((function(){e?(w.current.focus(),w.current.select()):h(r)}),[e]),s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{ref:w,className:"textInput",type:p?"password":"text",placeholder:f,style:C.input,value:y,onClick:function(e){return e.stopPropagation()},onChange:function(e){return h(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&t(y)}}),s.a.createElement("div",{onClick:function(e){e.stopPropagation(),t(y)},style:C.acceptButton},b||"Accept"),s.a.createElement(l.a,{title:"Cancel",onClick:function(){return n()}}))}},851:function(e,t){},9:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r="#2b6284",a="#ecf4f9",c="#9fc7e0",i="#97bace",o="#609bb8",s="hsla(205, 49%, 66%, 1)",l="#67a1cb",u="#3881ad",d="#ef6565",f="#53c171"},907:function(e,t){},915:function(e,t){},917:function(e,t){}},[[588,1,2]]]);
//# sourceMappingURL=main.6b0524bf.chunk.js.map